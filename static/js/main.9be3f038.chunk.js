(this["webpackJsonpserum-dex-ui"]=this["webpackJsonpserum-dex-ui"]||[]).push([[0],{303:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return v}));var r=n(1),a=n.n(r),o=n(5),c=n(8);function i(e,t,n,r){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(a.a.mark((function e(t,n,r,o){var c,i,u,s,l;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=0,i=0,!(o.length>255)){e.next=15;break}case 3:if(!(o.length-i>255)){e.next=15;break}return u=o.slice(i,i+255),i+=255,console.log("send",(2|c).toString(16),u.length.toString(16),u),e.next=9,t.send(224,n,r,2|c,u);case 9:if(2===e.sent.length){e.next=12;break}throw new Error("Received unexpected reply payload");case 12:c|=1,e.next=3;break;case 15:return s=o.slice(i),console.log("send",c.toString(16),s.length.toString(16),s),e.next=19,t.send(224,n,r,c,s);case 19:return l=e.sent,e.abrupt("return",l.slice(0,l.length-2));case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(e|1<<31>>>0)>>>0}function l(t,n){var r;r=void 0!==t?void 0!==n?4:3:2;var a=e.alloc(1+4*r),o=0;return o=a.writeUInt8(r,o),o=a.writeUInt32BE(s(44),o),o=a.writeUInt32BE(s(501),o),r>2&&(o=a.writeUInt32BE(s(t),o),4===r&&(o=a.writeUInt32BE(s(n),o))),a}function d(e,t){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(a.a.mark((function e(t,n){var r,o,c=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]?c[2]:l(),o=n.serializeMessage(),e.abrupt("return",p(t,o,r));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e,t){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(a.a.mark((function t(n,r){var o,c,u,s=arguments;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:l(),(c=e.alloc(1)).writeUInt8(1,0),u=e.concat([c,o,r]),t.abrupt("return",i(n,6,1,u));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(a.a.mark((function e(t){var n,r,o=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:l(),e.next=3,i(t,5,0,n);case 3:return r=e.sent,e.abrupt("return",new c.PublicKey(r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}).call(this,n(12).Buffer)},410:function(e,t,n){e.exports=n.p+"static/media/logo.da50543d.png"},424:function(e,t,n){e.exports=n(694)},429:function(e,t,n){},430:function(e,t,n){},431:function(e,t){},433:function(e,t){},456:function(e,t){},457:function(e,t){},601:function(e,t){},603:function(e,t){},614:function(e,t){},616:function(e,t){},643:function(e,t){},645:function(e,t){},650:function(e,t){},652:function(e,t){},659:function(e,t){},671:function(e,t){},674:function(e,t){},694:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(47),c=n.n(o),i=(n(429),n(430),n(1)),u=n.n(i),s=n(5),l=n(9),d=n(27),f=n(8),p=n(34),m=n.n(p);function v(e){return b.apply(this,arguments)}function b(){return(b=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=new Intl.NumberFormat(void 0,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2});function g(e,t){return t?Math.floor(e*Math.pow(10,t))/Math.pow(10,t):Math.floor(e)}function k(e,t){return t?Math.round(e*Math.pow(10,t))/Math.pow(10,t):e}function y(e){return!isNaN(e)&&Math.floor(e)!==e&&e.toString().includes(".")?e.toString().split(".")[1].length||0:!isNaN(e)&&Math.floor(e)!==e&&e.toString().includes("e")?parseInt(e.toString().split("e-")[1]||"0"):0}function O(e,t){var n=e.div(t).toNumber(),r=e.umod(t),a=r.gcd(t);return n+r.div(a).toNumber()/t.div(a).toNumber()}function w(e){return new m.a(10).pow(new m.a(e))}var E={};function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=localStorage.getItem(e)||t,a=Object(r.useState)(e+"\n"+n),o=Object(l.a)(a,2),c=o[1];Object(r.useEffect)((function(){return E[e]||(E[e]=[]),E[e].push(c),function(){E[e]=E[e].filter((function(e){return e!==c})),0===E[e].length&&delete E[e]}}),[e]);var i=Object(r.useCallback)((function(t){var r;n!==t&&(null===t?localStorage.removeItem(e):localStorage.setItem(e,t),null===(r=E[e])||void 0===r||r.forEach((function(n){return n(e+"\n"+t)})))}),[n,e]);return[n,i]}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=x(e,JSON.stringify(t)),a=Object(l.a)(n,2),o=a[0],c=a[1];return[Object(r.useMemo)((function(){return o&&JSON.parse(o)}),[o]),function(e){return c(JSON.stringify(e))}]}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=e.toBase58();return n.slice(0,t)+"\u2026"+n.slice(-t)}function T(e,t,n){if(!n&&Object.keys(e).length!==Object.keys(t).length)return!1;n=n||Object.keys(e);var r,a=Object(d.a)(n);try{for(a.s();!(r=a.n()).done;){var o=r.value;if(e[o]!==t[o])return!1}}catch(c){a.e(c)}finally{a.f()}return!0}var C=n(24),M=n(14),A=n(13),I=n(72),N=n.n(I),_=new Date,P=new Map,R=function e(t,n,r,a,o,c){Object(A.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.refreshInterval=void 0,this.refreshIntervalOnError=void 0,this.callback=void 0,this.cacheNullValues=!0,this.cacheKey=t,this.fn=n,this.refreshInterval=r,this.refreshIntervalOnError=a,this.callback=o,this.cacheNullValues=c},F=function(){function e(t,n,r){var a=this;Object(A.a)(this,e),this.cacheKey=void 0,this.fn=void 0,this.timeoutId=void 0,this.listeners=void 0,this.errors=void 0,this.cacheNullValues=!0,this.refresh=Object(s.a)(u.a.mark((function e(){var t,n,r,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.timeoutId&&(clearTimeout(a.timeoutId),a.timeoutId=null),!a.stopped){e.next=3;break}return e.abrupt("return");case 3:return t=!1,e.prev=4,e.next=7,a.fn();case 7:if(n=e.sent,a.cacheNullValues||null!==n){e.next=14;break}return console.log("Not caching null value for ".concat(a.cacheKey)),a.errors=0,e.abrupt("return",n);case 14:return P.set(a.cacheKey,n),a.errors=0,a.notifyListeners(),e.abrupt("return",n);case 18:e.next=25;break;case 20:e.prev=20,e.t0=e.catch(4),++a.errors,console.warn(e.t0),t=!0;case 25:return e.prev=25,a.timeoutId||a.stopped||(r=a.refreshInterval,t&&a.refreshIntervalOnError&&a.refreshIntervalOnError>0&&(r=a.refreshIntervalOnError),a.errors>0&&(r=Math.min(1e3*Math.pow(2,a.errors-1),6e4)),(o=+new Date-+_)<5e3&&(r+=5e3-o/2),"hidden"===document.visibilityState?r=6e4:document.hasFocus()||(r*=1.5),r*=.8+.4*Math.random(),a.timeoutId=setTimeout(a.refresh,r)),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[4,20,25,28]])}))),this.cacheKey=t,this.fn=n,this.timeoutId=null,this.listeners=new Set,this.errors=0,this.cacheNullValues=r}return Object(M.a)(e,[{key:"refreshInterval",get:function(){return Math.min.apply(Math,Object(C.a)(Object(C.a)(this.listeners).map((function(e){return e.refreshInterval}))))}},{key:"refreshIntervalOnError",get:function(){var e=Object(C.a)(this.listeners).map((function(e){return e.refreshIntervalOnError})).filter((function(e){return null!==e}));return 0===e.length?null:Math.min.apply(Math,Object(C.a)(e))}},{key:"stopped",get:function(){return 0===this.listeners.size}},{key:"addListener",value:function(e){var t=this.refreshInterval;this.listeners.add(e),this.refreshInterval<t&&this.refresh()}},{key:"removeListener",value:function(e){N()(this.listeners.delete(e)),this.stopped&&this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"notifyListeners",value:function(){this.listeners.forEach((function(e){return e.callback()}))}}]),e}(),K=new(function(){function e(){Object(A.a)(this,e),this.loops=new Map}return Object(M.a)(e,[{key:"addListener",value:function(e){this.loops.has(e.cacheKey)||this.loops.set(e.cacheKey,new F(e.cacheKey,e.fn,e.cacheNullValues)),this.loops.get(e.cacheKey).addListener(e)}},{key:"removeListener",value:function(e){var t=this.loops.get(e.cacheKey);t.removeListener(e),t.stopped&&(this.loops.delete(e.cacheKey),P.delete(e.cacheKey))}},{key:"refresh",value:function(e){this.loops.has(e)&&this.loops.get(e).refresh()}},{key:"refreshAll",value:function(){return Promise.all(Object(C.a)(this.loops.values()).map((function(e){return e.refresh()})))}}]),e}());function z(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=n.refreshInterval,o=void 0===a?6e4:a,c=n.refreshIntervalOnError,i=void 0===c?null:c,u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=Object(r.useReducer)((function(e){return e+1}),0),d=Object(l.a)(s,2),f=d[1];if(Object(r.useEffect)((function(){if(!t)return function(){};var n=new R(t,e,o,i,f,u);return K.addListener(n),function(){return K.removeListener(n)}}),[t,o]),!t)return[null,!1];var p=P.has(t),m=p?P.get(t):void 0;return[m,p]}function B(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&P.delete(e);var n=K.loops.get(e);n&&(n.refresh(),t&&n.notifyListeners())}var q=n(63),L=[{name:"mainnet-beta",endpoint:"https://solana-api.projectserum.com",custom:!1},{name:"localnet",endpoint:"http://127.0.0.1:8899",custom:!1}],D=new Map,W=a.a.createContext(null);function U(e){var t=e.children,n=j("connectionEndpts",L[0].endpoint),o=Object(l.a)(n,2),c=o[0],i=o[1],u=j("customConnectionEndpoints",[]),s=Object(l.a)(u,2),d=s[0],p=s[1],m=L.concat(d),v=Object(r.useMemo)((function(){return new f.Connection(c,"recent")}),[c]),b=Object(r.useMemo)((function(){return new f.Connection(c,"recent")}),[c]);return Object(r.useEffect)((function(){var e=v.onAccountChange((new f.Account).publicKey,(function(){}));return function(){v.removeAccountChangeListener(e)}}),[v]),Object(r.useEffect)((function(){var e=v.onSlotChange((function(){return null}));return function(){v.removeSlotChangeListener(e)}}),[v]),Object(r.useEffect)((function(){var e=b.onAccountChange((new f.Account).publicKey,(function(){}));return function(){b.removeAccountChangeListener(e)}}),[b]),Object(r.useEffect)((function(){var e=b.onSlotChange((function(){return null}));return function(){b.removeSlotChangeListener(e)}}),[b]),a.a.createElement(W.Provider,{value:{endpoint:c,setEndpoint:i,connection:v,sendConnection:b,availableEndpoints:m,setCustomEndpoints:p}},t)}function H(){var e=Object(r.useContext)(W);if(!e)throw new Error("Missing connection context");return e.connection}function J(){var e=Object(r.useContext)(W);if(!e)throw new Error("Missing connection context");return e.sendConnection}function V(){var e=Object(r.useContext)(W);if(!e)throw new Error("Missing connection context");return{endpoint:e.endpoint,endpointInfo:e.availableEndpoints.find((function(t){return t.endpoint===e.endpoint})),setEndpoint:e.setEndpoint,availableEndpoints:e.availableEndpoints,setCustomEndpoints:e.setCustomEndpoints}}function G(e){var t=H(),n=Object(q.a)(t,null===e||void 0===e?void 0:e.toBase58()),a=z(Object(s.a)(u.a.mark((function n(){return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",e?t.getAccountInfo(e):null);case 1:case"end":return n.stop()}}),n)}))),n,{refreshInterval:6e4}),o=Object(l.a)(a,2),c=o[0],i=o[1];Object(r.useEffect)((function(){if(e){if(D.has(n)){++D.get(n).count}else{var r=null,a=t.onAccountChange(e,(function(e){r&&r.data.equals(e.data)&&r.lamports===e.lamports||(r=e,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.initializeOnly,a=void 0!==r&&r;if(!a||!P.has(e)){P.set(e,t);var o=K.loops.get(e);o&&o.notifyListeners()}}(n,e))}));D.set(n,{count:1,subscriptionId:a})}return function(){var e=D.get(n);e.count-1<=0?(t.removeAccountChangeListener(e.subscriptionId),D.delete(n)):--e.count}}}),[n]);var d=Object(r.useRef)(null);return c&&d.current&&d.current.data.equals(c.data)&&d.current.lamports===c.lamports||(d.current=c),[d.current,i]}function Y(e){var t=G(e),n=Object(l.a)(t,1)[0];return n&&n.data}var X=n(217),Q=n(419),Z=n(185),$=n(130);function ee(e){var t=e.external,n=void 0!==t&&t,r=Object(Z.a)(e,["external"]),o=r.to,c=r.children,i=Object(Z.a)(r,["to","children"]);return n?a.a.createElement("a",Object.assign({href:o,target:"_blank",rel:"noopener noreferrer"},i),c):a.a.createElement($.b,Object.assign({to:o},i),c)}function te(e){var t=e.message,n=e.description,r=e.txid,o=e.type,c=void 0===o?"info":o,i=e.placement,u=void 0===i?"bottomLeft":i;r&&(n=a.a.createElement(ee,{external:!0,to:"https://solscan.io/tx/"+r,style:{color:"#0000ff"}},"View transaction ",r.slice(0,8),"...",r.slice(r.length-8))),Q.a[c]({message:a.a.createElement("span",{style:{color:"black"}},t),description:a.a.createElement("span",{style:{color:"black",opacity:.5}},n),placement:u,style:{backgroundColor:"white"}})}var ne=n(702),re=n(71),ae=n(40),oe=n(41),ce=n(64),ie=n.n(ce),ue=n(396),se=n(303),le=new f.PublicKey("11111111111111111111111111111111"),de=function(e){Object(ae.a)(n,e);var t=Object(oe.a)(n);function n(){var e;return Object(A.a)(this,n),(e=t.call(this))._connecting=void 0,e._publicKey=void 0,e._transport=void 0,e._connecting=!1,e._publicKey=null,e._transport=null,e}return Object(M.a)(n,[{key:"publicKey",get:function(){return this._publicKey||le}},{key:"connected",get:function(){return null!==this._publicKey}},{key:"autoApprove",get:function(){return!1}},{key:"signAllTransactions",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=11;break}return a=t[r],e.next=6,this.signTransaction(a);case 6:o=e.sent,n.push(o);case 8:r++,e.next=2;break;case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signTransaction",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._transport&&this._publicKey){e.next=2;break}throw new Error("Not connected to Ledger");case 2:return e.next=4,Object(se.b)(this._transport,t);case 4:return n=e.sent,t.addSignature(this._publicKey,n),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._connecting){e.next=2;break}return e.abrupt("return");case 2:return this._connecting=!0,e.prev=3,e.next=6,ue.a.create();case 6:return this._transport=e.sent,e.next=9,Object(se.a)(this._transport);case 9:this._publicKey=e.sent,this.emit("connect",this._publicKey),e.next=18;break;case 13:return e.prev=13,e.t0=e.catch(3),te({message:"Ledger Error",description:e.t0.message}),e.next=18,this.disconnect();case 18:return e.prev=18,this._connecting=!1,e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,13,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!this._transport){e.next=6;break}return e.next=4,this._transport.close();case 4:this._transport=null,t=!0;case 6:this._connecting=!1,this._publicKey=null,t&&this.emit("disconnect");case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ie.a),fe=n(51),pe=function(e){Object(ae.a)(n,e);var t=Object(oe.a)(n);function n(){var e;return Object(A.a)(this,n),(e=t.call(this))._handleConnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["connect"].concat(r))},e._handleDisconnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["disconnect"].concat(r))},e.connect=e.connect.bind(Object(fe.a)(e)),e}return Object(M.a)(n,[{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isPhantom)return window.solana}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"signAllTransactions",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.publicKey)||le}},{key:"signTransaction",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e,t,n;if(!this._provider)return window.open("https://phantom.app/","_blank"),void te({message:"Connection Error",description:"Please install Phantom wallet"});this._provider.listeners("connect").length||(null===(t=this._provider)||void 0===t||t.on("connect",this._handleConnect));this._provider.listeners("disconnect").length||(null===(n=this._provider)||void 0===n||n.on("disconnect",this._handleDisconnect));return null===(e=this._provider)||void 0===e?void 0:e.connect()}},{key:"disconnect",value:function(){this._provider&&this._provider.disconnect()}}]),n}(ie.a);var me=function(e){Object(ae.a)(n,e);var t=Object(oe.a)(n);function n(){var e;return Object(A.a)(this,n),(e=t.call(this))._publicKey=void 0,e._onProcess=void 0,e._connected=void 0,e._onProcess=!1,e._connected=!1,e.connect=e.connect.bind(Object(fe.a)(e)),e}return Object(M.a)(n,[{key:"connected",get:function(){return this._connected}},{key:"autoApprove",get:function(){return!1}},{key:"signAllTransactions",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solana)||void 0===t?void 0:t.isMathWallet)return window.solana}},{key:"publicKey",get:function(){return this._publicKey||le}},{key:"signTransaction",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=this;if(!this._onProcess){if(!this._provider)return window.open("https://mathwallet.org/","_blank"),void te({message:"Math Wallet Error",description:"Please install mathwallet"});this._onProcess=!0,this._provider.getAccount().then((function(t){e._publicKey=new f.PublicKey(t),e._connected=!0,e.emit("connect",e._publicKey)})).catch((function(){e.disconnect()})).finally((function(){e._onProcess=!1}))}}},{key:"disconnect",value:function(){this._publicKey&&(this._publicKey=void 0,this._connected=!1,this.emit("disconnect"))}}]),n}(ie.a),ve=function(e){Object(ae.a)(n,e);var t=Object(oe.a)(n);function n(){var e;return Object(A.a)(this,n),(e=t.call(this))._handleConnect=function(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];(t=e).emit.apply(t,["connect"].concat(r))},e._handleDisconnect=function(){var t,n,r;null===(t=e._provider)||void 0===t||t.off("connect",e._handleConnect),null===(n=e._provider)||void 0===n||n.off("disconnect",e._handleDisconnect);for(var a=arguments.length,o=new Array(a),c=0;c<a;c++)o[c]=arguments[c];(r=e).emit.apply(r,["disconnect"].concat(o))},e.connect=e.connect.bind(Object(fe.a)(e)),e}return Object(M.a)(n,[{key:"_provider",get:function(){var e,t;if(null===(e=window)||void 0===e||null===(t=e.solflare)||void 0===t?void 0:t.isSolflare)return window.solflare}},{key:"connected",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.isConnected)||!1}},{key:"autoApprove",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.autoApprove)||!1}},{key:"signAllTransactions",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signAllTransactions(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"publicKey",get:function(){var e;return(null===(e=this._provider)||void 0===e?void 0:e.publicKey)||le}},{key:"signTransaction",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=2;break}return e.abrupt("return",t);case 2:return e.abrupt("return",this._provider.signTransaction(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._provider){e.next=4;break}return window.open("https://solflare.com/","_blank"),te({message:"Connection Error",description:"Please install Solflare extension"}),e.abrupt("return");case 4:return null===(t=this._provider)||void 0===t||t.on("connect",this._handleConnect),null===(n=this._provider)||void 0===n||n.on("disconnect",this._handleDisconnect),e.abrupt("return",null===(r=this._provider)||void 0===r?void 0:r.connect());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"disconnect",value:function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._provider&&this._provider.disconnect();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(ie.a),be="https://cdn.jsdelivr.net/gh/solana-labs/oyster@main/assets/wallets",he=[{name:"sollet.io",url:"https://www.sollet.io",icon:"".concat(be,"/sollet.svg")},{name:"Sollet Extension",url:"https://www.sollet.io/extension",icon:"".concat(be,"/sollet.svg"),adapter:function(e,t){var n=window.sollet;return n?new X.a(n,t):{on:function(){},connect:function(){te({message:"Sollet Extension Error",description:"Please install the Sollet Extension for Chrome"})}}}},{name:"Ledger",url:"https://www.ledger.com",icon:"".concat(be,"/ledger.svg"),adapter:de},{name:"Solflare",url:"https://solflare.com/access-wallet",icon:"".concat(be,"/solflare.svg")},{name:"Solflare Extension",url:"https://solflare.com",icon:"".concat(be,"/solflare.svg"),adapter:ve},{name:"Phantom",url:"https://www.phantom.app",icon:"https://www.phantom.app/img/logo.png",adapter:pe},{name:"MathWallet",url:"https://www.mathwallet.org",icon:"".concat(be,"/mathwallet.svg"),adapter:me}],ge=a.a.createContext(null);function ke(e){var t,n,o=e.children,c=V().endpoint,i=Object(r.useState)(!1),u=Object(l.a)(i,2),s=u[0],d=u[1],f=j("walletProvider"),p=Object(l.a)(f,2),m=p[0],v=p[1],b=Object(r.useMemo)((function(){return he.find((function(e){return e.url===m}))}),[m]),h=Object(r.useState)(void 0),g=Object(l.a)(h,2),k=g[0],y=g[1];Object(r.useEffect)((function(){if(b){var e=function(){k=new(b.adapter||X.a)(m,c),y(k)};if("complete"!==document.readyState){var t=function t(){e(),window.removeEventListener("load",t)};return window.addEventListener("load",t),function(){return window.removeEventListener("load",t)}}e()}}),[b,m,c]);var O=Object(r.useState)(!1),w=Object(l.a)(O,2),E=w[0],x=w[1];Object(r.useEffect)((function(){return k&&(k.on("connect",(function(){var e;if(null===(e=k)||void 0===e?void 0:e.publicKey){console.log("connected"),localStorage.removeItem("feeDiscountKey"),x(!0);var t=k.publicKey.toBase58();te({message:"Wallet update",description:"Connected to wallet "+(t.length>20?"".concat(t.substring(0,7),".....").concat(t.substring(t.length-7,t.length)):t)})}})),k.on("disconnect",(function(){x(!1),te({message:"Wallet update",description:"Disconnected from wallet"}),localStorage.removeItem("feeDiscountKey")}))),function(){x(!1),k&&k.connected&&(k.disconnect(),x(!1))}}),[k]),Object(r.useEffect)((function(){return k&&s&&(k.connect(),d(!1)),function(){}}),[k,s]);var S=Object(r.useState)(!1),T=Object(l.a)(S,2),C=T[0],M=T[1],A=Object(r.useCallback)((function(){return M(!0)}),[]),I=Object(r.useCallback)((function(){return M(!1)}),[]);return a.a.createElement(ge.Provider,{value:{wallet:k,connected:E,select:A,providerUrl:m,setProviderUrl:v,providerName:null!==(t=null===(n=he.find((function(e){return e.url===m})))||void 0===n?void 0:n.name)&&void 0!==t?t:m}},o,a.a.createElement(ne.a,{title:"Select Wallet",okText:"Connect",visible:C,okButtonProps:{style:{display:"none"}},onCancel:I,width:400},he.map((function(e){return a.a.createElement(re.a,{size:"large",type:m===e.url?"primary":"ghost",onClick:function(){v(e.url),d(!0),I()},icon:a.a.createElement("img",{alt:"".concat(e.name),width:20,height:20,src:e.icon,style:{marginRight:8}}),style:{display:"block",width:"100%",textAlign:"left",marginBottom:8}},e.name)}))))}function ye(){var e=Object(r.useContext)(ge);if(!e)throw new Error("Missing wallet context");var t=e.wallet;return{connected:e.connected,wallet:t,providerUrl:e.providerUrl,setProvider:e.setProviderUrl,providerName:e.providerName,select:e.select,connect:function(){t?t.connect():e.select()},disconnect:function(){null===t||void 0===t||t.disconnect()}}}var Oe,we=n(43),Ee=n(44),xe=Object(Ee.a)(Oe||(Oe=Object(we.a)(["\nhtml,body{\n  background: green;\n}\ninput[type=number]::-webkit-inner-spin-button {\n  opacity: 0;\n}\ninput[type=number]:hover::-webkit-inner-spin-button,\ninput[type=number]:focus::-webkit-inner-spin-button {\n  opacity: 0.25;\n}\n/* width */\n::-webkit-scrollbar {\n  width: 15px;\n}\n/* Track */\n::-webkit-scrollbar-track {\n  background: #2d313c;\n}\n/* Handle */\n::-webkit-scrollbar-thumb {\n  background: #5b5f67;\n}\n/* Handle on hover */\n::-webkit-scrollbar-thumb:hover {\n  background: #5b5f67;\n}\n.ant-slider-track, .ant-slider:hover .ant-slider-track {\n  background-color: #3ea018;\n  opacity: 0.75;\n}\n.ant-slider-track,\n.ant-slider ant-slider-track:hover {\n  background-color: #3ea018;\n  opacity: 0.75;\n}\n.ant-slider-dot-active,\n.ant-slider-handle,\n.ant-slider-handle-click-focused,\n.ant-slider:hover .ant-slider-handle:not(.ant-tooltip-open)  {\n  border: 2px solid #3ea018; \n}\n.ant-table-tbody > tr.ant-table-row:hover > td {\n  background: #273043;\n}\n\n.ant-table-tbody > tr > td {\n  border-bottom: 8px solid #000001;\n}\n.ant-table-container table > thead > tr:first-child th {\n  border-bottom: none;\n}\n.ant-divider-horizontal.ant-divider-with-text::before, .ant-divider-horizontal.ant-divider-with-text::after {\n  border-top: 1px solid #434a59 !important;\n}\n.ant-layout {\n    background: black;\n  }\n  .ant-table {\n    background: #191919;\n  }\n  .ant-table-thead > tr > th {\n    background: #000001;\n  }\n.ant-select-item-option-content {\n  img {\n    margin-right: 4px;\n  }\n}\n.ant-modal-content {\n  background-color: #191919;\n}\n\n@-webkit-keyframes highlight {\n  from { background-color: #3ea018;}\n  to {background-color: #000001;}\n}\n@-moz-keyframes highlight {\n  from { background-color: #3ea018;}\n  to {background-color: #000001;}\n}\n@-keyframes highlight {\n  from { background-color: #3ea018;}\n  to {background-color: #000001;}\n}\n.flash {\n  -moz-animation: highlight 0.5s ease 0s 1 alternate ;\n  -webkit-animation: highlight 0.5s ease 0s 1 alternate;\n  animation: highlight 0.5s ease 0s 1 alternate;\n}"]))),je=n(407),Se=n(701),Te=Se.a.Title,Ce=function(e){Object(ae.a)(n,e);var t=Object(oe.a)(n);function n(){var e;Object(A.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hasError:!1},e}return Object(M.a)(n,[{key:"render",value:function(){return this.state.hasError?a.a.createElement("div",null,a.a.createElement("div",null,a.a.createElement(Te,{level:2},"Something went wrong."),a.a.createElement(Te,{level:4},"Please try again later."))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(r.Component),Me=n(50),Ae=n(182),Ie=n(704),Ne=n(705),_e=n(707),Pe=n(16),Re=n(31),Fe=n(53),Ke=n(99),ze=n(109),Be=n(12),qe=n(112);function Le(e){return De.apply(this,arguments)}function De(){return(De=Object(s.a)(u.a.mark((function e(t){var n,r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.connection,n=t.wallet,r=t.mintPublicKey,e.next=3,ze.c.getAssociatedTokenAddress(ze.a,ze.b,r,n.publicKey);case 3:return a=e.sent,(o=new f.Transaction).add(ze.c.createAssociatedTokenAccountInstruction(ze.a,ze.b,r,a,n.publicKey,n.publicKey)),e.abrupt("return",{transaction:o,newAccountPubkey:a});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c,i,s,l,d,f,p,m,v,b,h,g,k,y,O,w,E,x,j,S;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.market,r=t.openOrders,a=t.connection,o=t.wallet,c=t.baseCurrencyAccount,i=t.quoteCurrencyAccount,s=t.sendNotification,l=void 0===s||s,d=t.usdcRef,f=void 0===d?void 0:d,p=t.usdtRef,m=void 0===p?void 0:p,n&&o&&a&&r&&(c||i)){e.next=4;break}return l&&te({message:"Not connected"}),e.abrupt("return");case 4:if(b=null===c||void 0===c?void 0:c.pubkey,h=null===i||void 0===i?void 0:i.pubkey,b){e.next=12;break}return e.next=9,Le({connection:a,wallet:o,mintPublicKey:n.baseMintAddress});case 9:g=e.sent,b=null===g||void 0===g?void 0:g.newAccountPubkey,v=null===g||void 0===g?void 0:g.transaction;case 12:if(h){e.next=18;break}return e.next=15,Le({connection:a,wallet:o,mintPublicKey:n.quoteMintAddress});case 15:k=e.sent,h=null===k||void 0===k?void 0:k.newAccountPubkey,v=null===k||void 0===k?void 0:k.transaction;case 18:return y=null,n.supportsReferralFees&&(O=Re.TOKEN_MINTS.find((function(e){return"USDT"===e.name})),w=Re.TOKEN_MINTS.find((function(e){return"USDC"===e.name})),m&&O&&n.quoteMintAddress.equals(O.address)?y=m:f&&w&&n.quoteMintAddress.equals(w.address)&&(y=f)),e.next=22,n.makeSettleFundsTransaction(a,r,b,h,y);case 22:return E=e.sent,x=E.transaction,j=E.signers,S=ut([v,x]),e.next=28,et({transaction:S,signers:j,wallet:o,connection:a,sendingMessage:"Settling funds...",sendNotification:l});case 28:return e.abrupt("return",e.sent);case 29:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c,i,l,d,f,p,m,v,b;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.connection,r=t.wallet,a=t.tokenAccounts,o=t.markets,c=t.selectedTokenAccounts,o&&r&&n&&a){e.next=3;break}return e.abrupt("return");case 3:return i=[],o.reduce((function(e,t){return e.push(t._programId),e}),[]).forEach((function(e){i.find((function(t){return t.equals(e)}))||i.push(e)})),l=function(){var e=Object(s.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re.OpenOrders.findForOwner(n,r.publicKey,t);case 2:return a=e.sent,e.abrupt("return",a.filter((function(e){return e.baseTokenFree.toNumber()||e.quoteTokenFree.toNumber()})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(i.map((function(e){return l(e)})));case 8:return d=e.sent,f=d.reduce((function(e,t){return e.concat(t)}),[]),e.next=12,Promise.all(f.map((function(e){var t,r,i=o.find((function(t){var n,r;return null===(n=t._decoded)||void 0===n||null===(r=n.ownAddress)||void 0===r?void 0:r.equals(e.market)}));if(e.baseTokenFree.isZero()&&e.quoteTokenFree.isZero())return null;var u=null===i||void 0===i?void 0:i.baseMintAddress,s=null===i||void 0===i?void 0:i.quoteMintAddress,l=null===(t=Vt(a,u,u&&c&&c[u.toBase58()]))||void 0===t?void 0:t.pubkey,d=null===(r=Vt(a,s,s&&c&&c[s.toBase58()]))||void 0===r?void 0:r.pubkey;return l&&d?i&&i.makeSettleFundsTransaction(n,e,l,d):null})));case 12:if((p=e.sent.filter((function(e){return!!e})))&&0!==p.length){e.next=15;break}return e.abrupt("return");case 15:return m=p.slice(0,4).map((function(e){return e.transaction})),v=[],p.reduce((function(e,t){return e.concat(t.signers)}),[]).forEach((function(e){v.find((function(t){return t.publicKey.equals(e.publicKey)}))||v.push(e)})),b=ut(m),e.next=21,et({transaction:b,signers:v,wallet:r,connection:n});case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ye(Object(Pe.a)(Object(Pe.a)({},t),{},{orders:[t.order]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.market,r=t.wallet,a=t.connection,o=t.orders,c=n.makeMatchOrdersTransaction(5),o.forEach((function(e){c.add(n.makeCancelOrderInstruction(a,r.publicKey,e))})),c.add(n.makeMatchOrdersTransaction(5)),e.next=6,et({transaction:c,wallet:r,connection:a,sendingMessage:"Sending cancel..."});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c,i,s,l,d,p,m,v,b,h,g,k,O,w,E,x,j,S,T,M,A,I,N,_,P,R,F,K,z;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.side,o=t.price,c=t.size,i=t.orderType,s=t.market,l=t.connection,d=t.wallet,p=t.baseCurrencyAccount,m=t.quoteCurrencyAccount,v=t.feeDiscountPubkey,b=void 0===v?void 0:v,h=(null===s||void 0===s||null===(n=s.minOrderSize)||void 0===n?void 0:n.toFixed(y(s.minOrderSize)))||(null===s||void 0===s?void 0:s.minOrderSize),g=(null===s||void 0===s||null===(r=s.tickSize)||void 0===r?void 0:r.toFixed(y(s.tickSize)))||(null===s||void 0===s?void 0:s.tickSize),k=function(e,t){return Math.abs(e/t%1)<1e-5||Math.abs(e/t%1-1)<1e-5},!isNaN(o)){e.next=7;break}return te({message:"Invalid price",type:"error"}),e.abrupt("return");case 7:if(!isNaN(c)){e.next=10;break}return te({message:"Invalid size",type:"error"}),e.abrupt("return");case 10:if(d&&d.publicKey){e.next=13;break}return te({message:"Connect wallet",type:"error"}),e.abrupt("return");case 13:if(s){e.next=16;break}return te({message:"Invalid  market",type:"error"}),e.abrupt("return");case 16:if(k(c,s.minOrderSize)){e.next=19;break}return te({message:"Size must be an increment of ".concat(h),type:"error"}),e.abrupt("return");case 19:if(!(c<s.minOrderSize)){e.next=22;break}return te({message:"Size too small",type:"error"}),e.abrupt("return");case 22:if(k(o,s.tickSize)){e.next=25;break}return te({message:"Price must be an increment of ".concat(g),type:"error"}),e.abrupt("return");case 25:if(!(o<s.tickSize)){e.next=28;break}return te({message:"Price under tick size",type:"error"}),e.abrupt("return");case 28:if(O=d.publicKey,w=new f.Transaction,E=[],p){e.next=39;break}return e.next=34,Le({connection:l,wallet:d,mintPublicKey:s.baseMintAddress});case 34:x=e.sent,j=x.transaction,S=x.newAccountPubkey,w.add(j),p=S;case 39:if(m){e.next=47;break}return e.next=42,Le({connection:l,wallet:d,mintPublicKey:s.quoteMintAddress});case 42:T=e.sent,M=T.transaction,A=T.newAccountPubkey,w.add(M),m=A;case 47:if(I="sell"===a?p:m){e.next=51;break}return te({message:"Need an SPL token account for cost currency",type:"error"}),e.abrupt("return");case 51:return N={owner:O,payer:I,side:a,price:o,size:c,orderType:i,feeDiscountPubkey:b||null},console.log(N),_=s.makeMatchOrdersTransaction(5),w.add(_),P=$e(),e.next=58,s.makePlaceOrderTransaction(l,N,12e4,12e4);case 58:return R=e.sent,F=R.transaction,K=R.signers,z=$e(),console.log("Creating order transaction took ".concat(z-P)),w.add(F),w.add(s.makeMatchOrdersTransaction(5)),E.push.apply(E,Object(C.a)(K)),e.next=68,et({transaction:w,wallet:d,connection:l,signers:E,sendingMessage:"Sending order..."});case 68:return e.abrupt("return",e.sent);case 69:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $e=function(){return(new Date).getTime()/1e3};function et(e){return tt.apply(this,arguments)}function tt(){return(tt=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c,i,s,l,d,f,p,m,v,b,h,g;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[]:a,c=t.connection,i=t.sendingMessage,s=void 0===i?"Sending transaction...":i,l=t.sentMessage,d=void 0===l?"Transaction sent":l,f=t.successMessage,p=void 0===f?"Transaction confirmed":f,m=t.timeout,v=void 0===m?15e3:m,b=t.sendNotification,h=void 0===b||b,e.next=3,nt({transaction:n,wallet:r,signers:o,connection:c});case 3:return g=e.sent,e.next=6,at({signedTransaction:g,connection:c,sendingMessage:s,sentMessage:d,successMessage:p,timeout:v,sendNotification:h});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.transaction,r=t.wallet,a=t.signers,o=void 0===a?[]:a,c=t.connection,e.next=3,c.getRecentBlockhash("max");case 3:return n.recentBlockhash=e.sent.blockhash,n.setSigners.apply(n,[r.publicKey].concat(Object(C.a)(o.map((function(e){return e.publicKey}))))),o.length>0&&n.partialSign.apply(n,Object(C.a)(o)),e.next=8,r.signTransaction(n);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function at(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(s.a)(u.a.mark((function e(t){var n,r,a,o,c,i,l,d,f,p,m,b,h,g,k,y,O,w,E,x,j;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.signedTransaction,r=t.connection,a=t.sendingMessage,o=void 0===a?"Sending transaction...":a,c=t.sentMessage,i=void 0===c?"Transaction sent":c,l=t.successMessage,d=void 0===l?"Transaction confirmed":l,f=t.timeout,p=void 0===f?15e3:f,m=t.sendNotification,b=void 0===m||m,h=n.serialize(),g=$e(),b&&te({message:o}),e.next=6,r.sendRawTransaction(h,{skipPreflight:!0});case 6:return k=e.sent,b&&te({message:i,type:"success",txid:k}),console.log("Started awaiting confirmation for",k),y=!1,Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y||!($e()-g<p)){e.next=6;break}return r.sendRawTransaction(h,{skipPreflight:!0}),e.next=4,v(300);case 4:e.next=0;break;case 6:case"end":return e.stop()}}),e)})))(),e.prev=11,e.next=14,ct(k,p,r);case 14:e.next=42;break;case 16:if(e.prev=16,e.t0=e.catch(11),!e.t0.timeout){e.next=20;break}throw new Error("Timed out awaiting confirmation on transaction");case 20:return O=null,e.prev=21,e.next=24,mt(r,n,"single");case 24:O=e.sent.value,e.next=29;break;case 27:e.prev=27,e.t1=e.catch(21);case 29:if(!O||!O.err){e.next=41;break}if(!O.logs){e.next=39;break}w=O.logs.length-1;case 32:if(!(w>=0)){e.next=39;break}if(!(E=O.logs[w]).startsWith("Program log: ")){e.next=36;break}throw new Error("Transaction failed: "+E.slice("Program log: ".length));case 36:--w,e.next=32;break;case 39:throw"object"==typeof O.err&&"InstructionError"in O.err?(j=Object(Re.parseInstructionErrorResponse)(n,O.err.InstructionError),x=j.error):x=JSON.stringify(O.err),new Error(x);case 41:throw new Error("Transaction failed");case 42:return e.prev=42,y=!0,e.finish(42);case 45:return b&&te({message:d,type:"success",txid:k}),console.log("Latency",k,$e()-g),e.abrupt("return",k);case 48:case"end":return e.stop()}}),e,null,[[11,16,42,45],[21,27]])})))).apply(this,arguments)}function ct(e,t,n){return it.apply(this,arguments)}function it(){return(it=Object(s.a)(u.a.mark((function e(t,n,r){var a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!1,e.next=3,new Promise((function(e,o){Object(s.a)(u.a.mark((function c(){return u.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:setTimeout((function(){a||(a=!0,console.log("Timed out for txid",t),o({timeout:!0}))}),n);try{r.onSignature(t,(function(n){console.log("WS confirmed",t,n),a=!0,n.err?o(n.err):e(n)}),"recent"),console.log("Set up WS connection",t)}catch(i){a=!0,console.log("WS error in setup",t,i)}case 2:if(a){c.next=8;break}return Object(s.a)(u.a.mark((function n(){var c,i;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,r.getSignatureStatuses([t]);case 3:c=n.sent,i=c&&c.value[0],a||(i?i.err?(console.log("REST error for",t,i),a=!0,o(i.err)):i.confirmations?(console.log("REST confirmation for",t,i),a=!0,e(i)):console.log("REST no confirmations for",t,i):console.log("REST null result for",t,i)),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),a||console.log("REST connection error: txid",t,n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))(),c.next=6,v(300);case 6:c.next=2;break;case 8:case"end":return c.stop()}}),c)})))()}));case 3:return o=e.sent,a=!0,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){var t=new f.Transaction;return e.filter((function(e){return void 0!==e})).forEach((function(e){t.add(e)})),t}var st,lt=Object(qe.a)({executable:"boolean",owner:"string",lamports:"number",data:"any",rentEpoch:"number?"}),dt=(st=qe.a.array([qe.a.union(["null",lt])]),function(e){var t=qe.a.literal("2.0");return qe.a.union([Object(qe.a)({jsonrpc:t,id:"string",error:"any"}),Object(qe.a)({jsonrpc:t,id:"string",error:"null?",result:e})])}({context:Object(qe.a)({slot:"number"}),value:st}));function ft(e,t){return pt.apply(this,arguments)}function pt(){return(pt=Object(s.a)(u.a.mark((function e(t,n){var r,a,o,c,i,s,l,p,m,v,b,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[n.map((function(e){return e.toBase58()})),{commitment:"recent"}],e.next=3,t._rpcRequest("getMultipleAccounts",r);case 3:if(a=e.sent,!(o=dt(a)).error){e.next=7;break}throw new Error("failed to get info about accounts "+n.map((function(e){return e.toBase58()})).join(", ")+": "+o.error.message);case 7:N()("undefined"!==typeof o.result),c=[],i=Object(d.a)(o.result.value);try{for(i.s();!(s=i.n()).done;)l=s.value,p=null,o.result.value&&(m=l.executable,v=l.owner,b=l.lamports,h=l.data,N()("base64"===h[1]),p={executable:m,owner:new f.PublicKey(v),lamports:b,data:Be.Buffer.from(h[0],"base64")}),c.push(p)}catch(u){i.e(u)}finally{i.f()}return e.abrupt("return",{context:{slot:o.result.context.slot},value:Object.fromEntries(c.map((function(e,t){return[n[t].toBase58(),e]})))});case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e,t,n){return vt.apply(this,arguments)}function vt(){return(vt=Object(s.a)(u.a.mark((function e(t,n,r){var a,o,c,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._recentBlockhash(t._disableBlockhashCaching);case 2:return n.recentBlockhash=e.sent,a=n.serializeMessage(),o=n._serialize(a),c=o.toString("base64"),i=[c,{encoding:"base64",commitment:r}],e.next=10,t._rpcRequest("simulateTransaction",i);case 10:if(!(s=e.sent).error){e.next=13;break}throw new Error("failed to simulate transaction: "+s.error.message);case 13:return e.abrupt("return",s.result);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var bt=Fe.struct([Fe.blob(32,"mint"),Fe.blob(32,"owner"),Fe.nu64("amount"),Fe.blob(93)]),ht=Fe.struct([Fe.blob(36),Fe.blob(8,"supply"),Fe.u8("decimals"),Fe.u8("initialized"),Fe.blob(36)]);function gt(e){var t=bt.decode(e),n=t.mint,r=t.owner,a=t.amount;return{mint:new f.PublicKey(n),owner:new f.PublicKey(r),amount:a}}function kt(e){var t=ht.decode(e),n=t.decimals,r=t.initialized,a=t.supply;return{decimals:n,initialized:!!r,supply:new m.a(a,10,"le")}}function yt(e){return[{memcmp:{offset:bt.offsetOf("owner"),bytes:e.toBase58()}},{dataSize:bt.span}]}var Ot=new f.PublicKey("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");function wt(e,t){return Et.apply(this,arguments)}function Et(){return(Et=Object(s.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=yt(n),e.next=3,t.getProgramAccounts(Ot,{filters:r});case 3:return a=e.sent,e.abrupt("return",a.map((function(e){var t=e.pubkey,n=e.account,r=n.data,a=n.executable,o=n.owner,c=n.lamports;return{publicKey:new f.PublicKey(t),accountInfo:{data:r,executable:a,owner:new f.PublicKey(o),lamports:c}}})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=Object(s.a)(u.a.mark((function e(t,n){var r,a,o,c,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([wt(t,n),t.getAccountInfo(n)]);case 2:return r=e.sent,a=Object(l.a)(r,2),o=a[0],c=a[1],i=o.map((function(e){var t=e.publicKey,n=e.accountInfo;return{pubkey:t,account:n,effectiveMint:gt(n.data).mint}})),e.abrupt("return",i.concat({pubkey:n,account:c,effectiveMint:Ke.WRAPPED_SOL_MINT}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(){var e=H(),t=Jt(),n=Object(l.a)(t,1)[0],r=Mt(),a=Object(l.a)(r,1)[0],o=(n||[]).map((function(e){return e.effectiveMint})).concat((a||[]).map((function(e){return e.market.baseMintAddress}))).concat((a||[]).map((function(e){return e.market.quoteMintAddress}))),c=Object(C.a)(new Set(o.map((function(e){return e.toBase58()})))).map((function(e){return new f.PublicKey(e)}));return z(function(){var t=Object(s.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ft(e,c);case 2:return n=t.sent,t.abrupt("return",Object.fromEntries(Object.entries(n.value).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return[n,r&&kt(r.data)]}))));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(q.a)("getAllMintInfo",e,(n||[]).length,(a||[]).length),{refreshInterval:5e6})}var Tt=function(){function e(){Object(A.a)(this,e)}return Object(M.a)(e,null,[{key:"get",value:function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(this.URL+t);case 3:if(!(n=e.sent).ok){e.next=9;break}return e.next=7,n.json();case 7:return r=e.sent,e.abrupt("return",r.success?r.data:null);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log("Error fetching from Bonfida API ".concat(t,": ").concat(e.t0));case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getRecentTrades",value:function(){var t=Object(s.a)(u.a.mark((function t(n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.get("trades/address/".concat(n)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),e}();Tt.URL="https://serum-api.bonfida.com/";var Ct=Re.MARKETS;function Mt(){var e=H(),t=Rt().customMarkets;return z(function(){var n=Object(s.a)(u.a.mark((function n(){var r;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all(an(t).map(function(){var t=Object(s.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Re.Market.load(e,n.address,{},n.programId);case 3:return r=t.sent,t.abrupt("return",{market:r,marketName:n.name,programId:n.programId});case 7:return t.prev=7,t.t0=t.catch(0),te({message:"Error loading all market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()));case 2:return r=n.sent,n.abrupt("return",r.filter((function(e){return!!e})));case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),Object(q.a)("getAllMarkets",t.length,e),{refreshInterval:Nt})}function At(){var e,t=H(),n=ye().wallet;function r(){return(r=Object(s.a)(u.a.mark((function e(){var r,a,o,c,i,s,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&t&&n.publicKey){e.next=2;break}return e.abrupt("return",[]);case 2:console.log("refreshing useUnmigratedOpenOrdersAccounts"),r=[],a=Array.from(new Set(Ct.filter((function(e){return e.deprecated})).map((function(e){return e.programId.toBase58()})))).map((function(e){return new f.PublicKey(e)})),c=Object(d.a)(a),e.prev=6,c.s();case 8:if((i=c.n()).done){e.next=22;break}return o=i.value,e.prev=10,e.next=13,Re.OpenOrders.findForOwner(t,n.publicKey,o);case 13:s=e.sent,r=r.concat(s.filter((function(e){return e.baseTokenTotal.toNumber()||e.quoteTokenTotal.toNumber()})).filter((function(e){return Ct.some((function(t){return t.deprecated&&t.address.equals(e.market)}))}))),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),console.log("Error loading deprecated markets",null===(l=o)||void 0===l?void 0:l.toBase58(),e.t0.message);case 20:e.next=8;break;case 22:e.next=27;break;case 24:e.prev=24,e.t1=e.catch(6),c.e(e.t1);case 27:return e.prev=27,c.f(),e.finish(27);case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[6,24,27,30],[10,17]])})))).apply(this,arguments)}var a=Object(q.a)("getUnmigratedOpenOrdersAccounts",t,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58()),o=z((function(){return r.apply(this,arguments)}),a,{refreshInterval:Nt});return{accounts:Object(l.a)(o,1)[0],refresh:function(e){return B(a,e)}}}var It=a.a.createContext(null),Nt=5e6,_t=Ct.find((function(e){var t=e.name,n=e.deprecated;return"SF/USDC"===t&&!n}));function Pt(e,t){var n,r;if(!e)return{};var a=an(t).find((function(t){return t.address.equals(e.address)})),o=(null===e||void 0===e?void 0:e.baseMintAddress)&&(null===(n=Re.TOKEN_MINTS.find((function(t){return t.address.equals(e.baseMintAddress)})))||void 0===n?void 0:n.name)||(null===a||void 0===a?void 0:a.baseLabel)&&"".concat(null===a||void 0===a?void 0:a.baseLabel,"*")||"UNKNOWN",c=(null===e||void 0===e?void 0:e.quoteMintAddress)&&(null===(r=Re.TOKEN_MINTS.find((function(t){return t.address.equals(e.quoteMintAddress)})))||void 0===r?void 0:r.name)||(null===a||void 0===a?void 0:a.quoteLabel)&&"".concat(null===a||void 0===a?void 0:a.quoteLabel,"*")||"UNKNOWN";return Object(Pe.a)(Object(Pe.a)({},a),{},{marketName:null===a||void 0===a?void 0:a.name,baseCurrency:o,quoteCurrency:c,marketInfo:a})}function Rt(){var e=j("customMarkets",[]),t=Object(l.a)(e,2);return{customMarkets:t[0],setCustomMarkets:t[1]}}function Ft(e){var t=e.marketAddress,n=e.setMarketAddress,o=e.children,c=Rt(),i=c.customMarkets,u=c.setCustomMarkets,s=t&&new f.PublicKey(t),d=H(),p=an(i),m=s&&p.find((function(e){return e.address.equals(s)}));Object(r.useEffect)((function(){m&&m.deprecated&&(console.log("Switching markets from deprecated",m),_t&&n(_t.address.toBase58()))}),[]);var v=Object(r.useState)(),b=Object(l.a)(v,2),h=b[0],g=b[1];return Object(r.useEffect)((function(){var e;h&&m&&(null===(e=h._decoded.ownAddress)||void 0===e?void 0:e.equals(null===m||void 0===m?void 0:m.address))||(g(null),m&&m.address?Re.Market.load(d,m.address,{},m.programId).then(g).catch((function(e){return te({message:"Error loading market",description:e.message,type:"error"})})):te({message:"Error loading market",description:"Please select a market from the dropdown",type:"error"}))}),[d,m]),a.a.createElement(It.Provider,{value:Object(Pe.a)(Object(Pe.a)({market:h},Pt(h,i)),{},{setMarketAddress:n,customMarkets:i,setCustomMarkets:u})},o)}function Kt(e){if(!e){var t=localStorage.getItem("marketAddress");t&&(e=JSON.parse(t)),e=e||(null===_t||void 0===_t?void 0:_t.address.toBase58())||""}return"/market/".concat(e)}function zt(){var e=j("selectedTokenAccounts",{}),t=Object(l.a)(e,2);return[t[0],t[1]]}function Bt(){var e=Object(r.useContext)(It);if(!e)throw new Error("Missing market context");return e}function qt(){var e=Object(r.useState)(null),t=Object(l.a)(e,2),n=t[0],a=t[1],o=Wt(),c=Object(l.a)(o,1)[0],i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=Lt(e);if(!t)return null;return t.filter((function(e){return e.eventFlags.maker})).map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{side:"buy"===e.side?"sell":"buy"})}))}();return Object(r.useEffect)((function(){var e,t,n=(null===c||void 0===c||null===(e=c.bids)||void 0===e?void 0:e.length)>0&&Number(c.bids[0][0]),r=(null===c||void 0===c||null===(t=c.asks)||void 0===t?void 0:t.length)>0&&Number(c.asks[0][0]),o=i&&i.length>0&&i[0].price,u=n&&r?o?[n,r,o].sort((function(e,t){return e-t}))[1]:(n+r)/2:null;a(u)}),[c,i]),n}function Lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=Bt(),n=t.market,r=H();function a(){return o.apply(this,arguments)}function o(){return(o=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:return t.next=4,n.loadFills(r,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var c=z(a,Object(q.a)("getUnfilteredTrades",n,r),{refreshInterval:5e3}),i=Object(l.a)(c,1),d=i[0];return d}function Dt(){var e=Bt().market,t=Y(e&&e._decoded.bids),n=Y(e&&e._decoded.asks);return{bidOrderbook:e&&t?Re.Orderbook.decode(e,t):null,askOrderbook:e&&n?Re.Orderbook.decode(e,n):null}}function Wt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=Dt(),n=t.bidOrderbook,r=t.askOrderbook,a=Bt(),o=a.market,c=n&&o?n.getL2(e).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1]]})):[],i=r&&o?r.getL2(e).map((function(e){var t=Object(l.a)(e,2);return[t[0],t[1]]})):[];return[{bids:c,asks:i},!!c||!!i]}function Ut(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Bt(),n=t.market,r=ye(),a=r.connected,o=r.wallet,c=H();function i(){return l.apply(this,arguments)}function l(){return(l=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a&&o){e.next=2;break}return e.abrupt("return",null);case 2:if(n){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,n.findOpenOrdersAccountsForOwner(c,o.publicKey);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return z(i,Object(q.a)("getOpenOrdersAccounts",o,n,a),{refreshInterval:e?1e3:5e3})}function Ht(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Ut(e),n=Object(l.a)(t,1),r=n[0];return r?r[0]:null}function Jt(){var e=ye(),t=e.connected,n=e.wallet,r=H();function a(){return(a=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,xt(r,n.publicKey);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return z((function(){return a.apply(this,arguments)}),Object(q.a)("getTokenAccounts",n,t),{refreshInterval:5e3})}function Vt(e,t,n){if(!e||!t)return null;var r=e.filter((function(e){var r=e.effectiveMint,a=e.pubkey;return t.equals(r)&&(!n||("string"===typeof n?n:n.toBase58())===a.toBase58())}));return r&&r[0]}function Gt(){var e=Jt(),t=Object(l.a)(e,1)[0],n=Bt().market,r=zt(),a=Object(l.a)(r,1)[0],o=null===n||void 0===n?void 0:n.quoteMintAddress;return Vt(t,o,o&&a[o.toBase58()])}function Yt(){var e=Jt(),t=Object(l.a)(e,1)[0],n=Bt().market,r=zt(),a=Object(l.a)(r,1)[0],o=null===n||void 0===n?void 0:n.baseMintAddress;return Vt(t,o,o&&a[o.toBase58()])}function Xt(){var e,t=Gt(),n=Bt().market,r=G(null===t||void 0===t?void 0:t.pubkey),a=Object(l.a)(r,2),o=a[0],c=a[1];return n&&t&&c&&o?n.quoteMintAddress.equals(Re.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.quoteSplSizeToNumber(new m.a(o.data.slice(64,72),10,"le")):null}function Qt(){var e,t=Yt(),n=Bt().market,r=G(null===t||void 0===t?void 0:t.pubkey),a=Object(l.a)(r,2),o=a[0],c=a[1];return n&&t&&c&&o?n.baseMintAddress.equals(Re.TokenInstructions.WRAPPED_SOL_MINT)?null!==(e=(null===o||void 0===o?void 0:o.lamports)/1e9)&&void 0!==e?e:0:n.baseSplSizeToNumber(new m.a(o.data.slice(64,72),10,"le")):null}function Zt(){var e=j("feeDiscountKey",void 0),t=Object(l.a)(e,2),n=t[0],r=t[1];return{storedFeeDiscountKey:n?new f.PublicKey(n):void 0,setStoredFeeDiscountKey:r}}function $t(){var e=Bt().market,t=ye(),n=t.connected,r=t.wallet,a=H(),o=Zt().setStoredFeeDiscountKey;return z(function(){var t=Object(s.a)(u.a.mark((function t(){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&r){t.next=2;break}return t.abrupt("return",null);case 2:if(e){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,e.findFeeDiscountKeys(a,r.publicKey);case 6:return(c=t.sent)&&o(c[0].pubkey.toBase58()),t.abrupt("return",c);case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(q.a)("getFeeDiscountKeys",r,e,n),{refreshInterval:5e3})}function en(){var e=function(){var e,t=ye(),n=t.wallet,r=t.connected,a=H(),o=on(),c=Object(C.a)(new Set(o.map((function(e){return e.programId.toBase58()})))).map((function(e){return new f.PublicKey(e)}));return z(function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Promise.all(c.map((function(e){return Re.OpenOrders.findForOwner(a,n.publicKey,e)})));case 4:return e.abrupt("return",e.sent.flat());case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Object(q.a)("getAllOpenOrdersAccounts",a,r,null===n||void 0===n||null===(e=n.publicKey)||void 0===e?void 0:e.toBase58(),o.length,(c||[]).length),{refreshInterval:5e3})}(),t=Object(l.a)(e,2),n=t[0],r=t[1],a=St(),o=Object(l.a)(a,2),c=o[0],i=o[1],p=Mt(),v=Object(l.a)(p,1)[0];if(!r||!i)return{};var b,h=Object.fromEntries((v||[]).map((function(e){return[e.market.address.toBase58(),e]}))),g={},k=Object(d.a)(n||[]);try{for(k.s();!(b=k.n()).done;){var y=b.value,E=h[y.market.toBase58()],x=null===E||void 0===E?void 0:E.market.baseMintAddress.toBase58(),j=null===E||void 0===E?void 0:E.market.quoteMintAddress.toBase58();x in g||(g[x]=[]),j in g||(g[j]=[]);var S=c&&c[x],T=O(new m.a(y.baseTokenFree),w((null===S||void 0===S?void 0:S.decimals)||0)),M=O(new m.a(y.baseTokenTotal),w((null===S||void 0===S?void 0:S.decimals)||0)),A=c&&c[j],I=O(new m.a(y.quoteTokenFree),w((null===A||void 0===A?void 0:A.decimals)||0)),N=O(new m.a(y.quoteTokenTotal),w((null===A||void 0===A?void 0:A.decimals)||0));g[x].push({market:y.market,free:T,total:M}),g[j].push({market:y.market,free:I,total:N})}}catch(_){k.e(_)}finally{k.f()}return g}var tn;function nn(){var e=Qt(),t=Xt(),n=Ht(!0),r=Bt(),a=r.baseCurrency,o=r.quoteCurrency,c=r.market,i=n&&n.baseTokenTotal&&n.baseTokenFree,u=n&&n.quoteTokenTotal&&n.quoteTokenFree;return"UNKNOWN"!==a&&"UNKNOWN"!==o&&a&&o?[{market:c,key:"".concat(a).concat(o).concat(a),coin:a,wallet:e,orders:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenTotal.sub(n.baseTokenFree)):null,openOrders:n,unsettled:i&&c&&n?c.baseSplSizeToNumber(n.baseTokenFree):null},{market:c,key:"".concat(o).concat(a).concat(o),coin:o,wallet:t,openOrders:n,orders:u&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenTotal.sub(n.quoteTokenFree)):null,unsettled:u&&c&&n?c.quoteSplSizeToNumber(n.quoteTokenFree):null}]:[]}function rn(){var e=H(),t=At().accounts,n=t&&Array.from(new Set(t.map((function(e){return e.market})))),r=n&&n.map((function(e){return e.toBase58()})),a=z(function(){var t=Object(s.a)(u.a.mark((function t(){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",null);case 2:return r=function(){var t=Object(s.a)(u.a.mark((function t(n){var r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Ct.find((function(e){return e.address.equals(n)}))){t.next=5;break}return console.log("Failed loading market"),te({message:"Error loading market",type:"error"}),t.abrupt("return",null);case 5:return t.prev=5,console.log("Loading market",r.name),t.next=9,Re.Market.load(e,r.address,{},r.programId);case 9:return t.abrupt("return",t.sent);case 12:return t.prev=12,t.t0=t.catch(5),console.log("Failed loading market",r.name,t.t0),te({message:"Error loading market",description:t.t0.message,type:"error"}),t.abrupt("return",null);case 17:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(n.map(r));case 5:return t.abrupt("return",t.sent.filter((function(e){return e})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Object(q.a)("useUnmigratedDeprecatedMarketsInner",e,r&&r.toString()),{refreshInterval:Nt}),o=Object(l.a)(a,1)[0];return o?o.map((function(e){return{market:e,openOrdersList:null===t||void 0===t?void 0:t.filter((function(t){return e&&t.market.equals(e.address)}))}})):null}function an(e){var t=e.map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{address:new f.PublicKey(e.address),programId:new f.PublicKey(e.programId),deprecated:!1})}));return[].concat(Object(C.a)(t),Object(C.a)(Ct))}function on(){return an(Rt().customMarkets)}function cn(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current&&n.current()}),t);return function(){clearInterval(e)}}}),[t])}var un=Ee.c.div(tn||(tn=Object(we.a)(["\n  margin: 5px;\n  padding: 20px;\n  background-color: #191919;\n  "])));function sn(e){var t=e.style,n=void 0===t?void 0:t,r=e.children,o=e.stretchVertical,c=void 0!==o&&o;return a.a.createElement(un,{style:Object(Pe.a)({height:c?"calc(100% - 10px)":void 0},n)},r)}var ln,dn,fn,pn,mn,vn,bn,hn=n(709),gn=n(710),kn=Ee.c.div(ln||(ln=Object(we.a)(["\n  color: rgba(255, 255, 255, 1);\n"]))),yn=Object(Ee.c)(Ie.a)(dn||(dn=Object(we.a)(["\n  padding: 20px 0 14px;\n  color: #434a59;\n"]))),On=Object(Ee.c)(Ie.a)(fn||(fn=Object(we.a)(["\n  padding: 20px 0 14px;\n  font-weight: 700;\n"]))),wn=Ee.c.div(pn||(pn=Object(we.a)(["\n  text-align: right;\n  float: right;\n  height: 100%;\n  ","\n  ","\n"])),(function(e){return e["data-width"]&&Object(Ee.b)(mn||(mn=Object(we.a)(["\n      width: ",";\n    "])),e["data-width"])}),(function(e){return e["data-bgcolor"]&&Object(Ee.b)(vn||(vn=Object(we.a)(["\n      background-color: ",";\n    "])),e["data-bgcolor"])})),En=Ee.c.div(bn||(bn=Object(we.a)(["\n  position: absolute;\n  right: 5px;\n  color: white;\n"])));function xn(e){var t=e.smallScreen,n=e.depth,o=void 0===n?7:n,c=e.onPrice,i=e.onSize,u=qt(),s=Wt(),d=Object(l.a)(s,1)[0],f=Bt(),p=f.baseCurrency,m=f.quoteCurrency,v=Object(r.useRef)(null),b=Object(r.useRef)(null),h=Object(r.useState)(null),g=Object(l.a)(h,2),k=g[0],y=g[1];function O(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.slice(0,o).reduce((function(e,n,r){var a,o=Object(l.a)(n,2),c=o[0],i=o[1],u=((null===(a=e[r-1])||void 0===a?void 0:a.cumulativeSize)||0)+i;return e.push({price:c,size:i,cumulativeSize:u,sizePercent:Math.round(u/(t||1)*100)}),e}),[]);return n&&(r=r.reverse()),r}return cn((function(){if(!v.current||JSON.stringify(v.current)!==JSON.stringify(b.current)){var e=(null===d||void 0===d?void 0:d.bids)||[],t=(null===d||void 0===d?void 0:d.asks)||[],n=function(e,t,n){var r=Object(l.a)(t,2)[1];return n<o?e+r:e},r=e.reduce(n,0)+t.reduce(n,0),a=O(e,r,!1),c=O(t,r,!0);v.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks},y({bids:a,asks:c})}}),250),Object(r.useEffect)((function(){b.current={bids:null===d||void 0===d?void 0:d.bids,asks:null===d||void 0===d?void 0:d.asks}}),[d]),a.a.createElement(sn,{style:t?{flex:1}:{height:"500px",overflow:"hidden"}},a.a.createElement(kn,null,"Orderbook"),a.a.createElement(yn,null,a.a.createElement(Ne.a,{span:12,style:{textAlign:"left"}},"Size (",p,")"),a.a.createElement(Ne.a,{span:12,style:{textAlign:"right"}},"Price (",m,")")),null===k||void 0===k?void 0:k.asks.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(jn,{key:t+"",price:t,size:n,side:"sell",sizePercent:r,onPriceClick:function(){return c(t)},onSizeClick:function(){return i(n)}})})),a.a.createElement(Sn,{markPrice:u}),null===k||void 0===k?void 0:k.bids.map((function(e){var t=e.price,n=e.size,r=e.sizePercent;return a.a.createElement(jn,{key:t+"",price:t,size:n,side:"buy",sizePercent:r,onPriceClick:function(){return c(t)},onSizeClick:function(){return i(n)}})})))}var jn=a.a.memo((function(e){var t=e.side,n=e.price,o=e.size,c=e.sizePercent,i=e.onSizeClick,u=e.onPriceClick,s=Object(r.useRef)(),l=Bt().market;Object(r.useEffect)((function(){var e,t;!(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t||t.classList.add("flash"));var n=setTimeout((function(){var e,t;return(null===(e=s.current)||void 0===e?void 0:e.classList.contains("flash"))&&(null===(t=s.current)||void 0===t?void 0:t.classList.remove("flash"))}),250);return function(){return clearTimeout(n)}}),[n,o]);var d=(null===l||void 0===l?void 0:l.minOrderSize)&&!isNaN(o)?Number(o).toFixed(y(l.minOrderSize)+1):o,f=(null===l||void 0===l?void 0:l.tickSize)&&!isNaN(n)?Number(n).toFixed(y(l.tickSize)+1):n;return a.a.createElement(Ie.a,{ref:s,style:{marginBottom:1},onClick:i},a.a.createElement(Ne.a,{span:12,style:{textAlign:"left"}},d),a.a.createElement(Ne.a,{span:12,style:{textAlign:"right"}},a.a.createElement(wn,{"data-width":c+"%","data-bgcolor":"buy"===t?"rgba(65, 199, 122, 0.6)":"rgba(242, 60, 105, 0.6)"}),a.a.createElement(En,{onClick:u},f)))}),(function(e,t){return T(e,t,["price","size","sizePercent"])})),Sn=a.a.memo((function(e){var t=e.markPrice,n=Bt().market,o=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e}),[e]),t.current}(t),c=t>o?"#41C77A":t<o?"#F23B69":"white",i=t&&(null===n||void 0===n?void 0:n.tickSize)&&t.toFixed(y(n.tickSize));return a.a.createElement(On,{justify:"center"},a.a.createElement(Ne.a,{style:{color:c}},t>o&&a.a.createElement(hn.a,{style:{marginRight:5}}),t<o&&a.a.createElement(gn.a,{style:{marginRight:5}}),i||"----"))}),(function(e,t){return T(e,t,["markPrice"])})),Tn=n(30),Cn=n(698);function Mn(e){var t=e.dataSource,n=e.columns,r=e.emptyLabel,o=void 0===r?"No data":r,c=e.pagination,i=void 0!==c&&c,u=e.loading,s=void 0!==u&&u,l=e.pageSize,d=void 0===l?10:l;return a.a.createElement(Tn.b,{renderEmpty:function(){return a.a.createElement("div",{style:{padding:"20px",display:"flex",justifyContent:"center",alignItems:"center"}},o)}},a.a.createElement(Cn.a,{dataSource:t,columns:n,pagination:!!i&&{pagination:!0,pageSize:d},loading:s}))}var An=n(186),In=a.a.createContext(null),Nn=new f.PublicKey("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),_n=new f.PublicKey("EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v"),Pn=new f.PublicKey("Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB");function Rn(e,t){return Fn.apply(this,arguments)}function Fn(){return(Fn=Object(s.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.PublicKey.findProgramAddress([t.toBuffer(),ze.b.toBuffer(),n.toBuffer()],Nn);case 2:return e.abrupt("return",e.sent[0]);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Kn=new f.PublicKey("58PwtjSDuFHuUkYjH9BYnnQKHfwo9reZhC2zMJv9JPkx"),zn=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(An.getHashedName)(t);case 2:return n=e.sent,e.next=5,Object(An.getNameAccountKey)(n,void 0,Kn);case 5:return r=e.sent,e.abrupt("return",{inputDomainKey:r,hashedInputName:n});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bn=function(e){var t=e.children,n="true"===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_EXCLUDE_MARKETS:"[]",REACT_APP_USDC_REFERRAL_FEES_ADDRESS:"4v85gzRhigvUGXyEekVjfneCTnMXA7fShFeMBWcdFYwN",REACT_APP_USDT_REFERRAL_FEES_ADDRESS:"92qspNpWSxENVMHsu6bwKxJngTpJ96DrQ5JTRzfMGFKq"}).REACT_APP_ALLOW_REF_LINK,o=j("refCode"),c=Object(l.a)(o,2),i=c[0],d=c[1],p=function(e){var t=H(),n=Object(r.useState)(void 0),a=Object(l.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)(void 0),d=Object(l.a)(i,2),p=d[0],m=d[1];return Object(r.useEffect)((function(){(function(){var n=Object(s.a)(u.a.mark((function n(){var r,a,o,i,s,l,d;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=void 0,a=void 0,e){n.next=6;break}return c(new f.PublicKey("4v85gzRhigvUGXyEekVjfneCTnMXA7fShFeMBWcdFYwN")),m(new f.PublicKey("92qspNpWSxENVMHsu6bwKxJngTpJ96DrQ5JTRzfMGFKq")),n.abrupt("return");case 6:if(n.prev=6,!e.includes(".sol")){n.next=17;break}return n.next=10,zn(e.replace(".sol",""));case 10:return i=n.sent,s=i.inputDomainKey,n.next=14,An.NameRegistryState.retrieve(t,s);case 14:o=n.sent,n.next=20;break;case 17:return n.next=19,Object(An.getTwitterRegistry)(t,e);case 19:o=n.sent;case 20:return n.next=22,Rn(o.owner,_n);case 22:return r=n.sent,n.next=25,Rn(o.owner,Pn);case 25:return a=n.sent,n.next=28,t.getAccountInfo(r);case 28:return l=n.sent,n.next=31,t.getAccountInfo(a);case 31:d=n.sent,(null===l||void 0===l?void 0:l.data)&&c(r),(null===d||void 0===d?void 0:d.data)&&m(a),n.next=39;break;case 36:n.prev=36,n.t0=n.catch(6),console.warn("Error getting refcode ".concat(n.t0));case 39:case"end":return n.stop()}}),n,null,[[6,36]])})));return function(){return n.apply(this,arguments)}})()()}),[t,e]),{usdcRef:o,usdtRef:p}}(n?i:void 0),m=p.usdcRef,v=p.usdtRef;return Object(r.useEffect)((function(){n||d(null)}),[n,d]),a.a.createElement(In.Provider,{value:{usdcRef:m,usdtRef:v,setRefCode:d,refCode:i,allowRefLink:n}},t)},qn=function(){var e=Object(r.useContext)(In);if(!e)throw new Error("Missing referrer context");return{usdcRef:e.usdcRef,usdtRef:e.usdtRef,setRefCode:e.setRefCode,refCode:e.refCode,allowRefLink:e.allowRefLink}};function Ln(e){var t=e.balances,n=e.showMarket,r=e.hideWalletBalance,o=e.onSettleSuccess,c=Jt(),i=Object(l.a)(c,1)[0],d=J(),f=ye().wallet,p=qn(),m=p.usdcRef,v=p.usdtRef;function b(){return(b=Object(s.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,We({market:t,openOrders:n,connection:d,wallet:f,baseCurrencyAccount:Vt(i,null===t||void 0===t?void 0:t.baseMintAddress),quoteCurrencyAccount:Vt(i,null===t||void 0===t?void 0:t.quoteMintAddress),usdcRef:m,usdtRef:v});case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),te({message:"Error settling funds",description:e.t0.message,type:"error"}),e.abrupt("return");case 9:o&&o();case 10:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var h=[n?{title:"Market",dataIndex:"marketName",key:"marketName"}:null,{title:"Coin",dataIndex:"coin",key:"coin"},r?null:{title:"Wallet Balance",dataIndex:"wallet",key:"wallet"},{title:"Orders",dataIndex:"orders",key:"orders"},{title:"Unsettled",dataIndex:"unsettled",key:"unsettled"},{key:"action",render:function(e){var t=e.market,n=e.openOrders,r=e.marketName;return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(re.a,{ghost:!0,style:{marginRight:12},onClick:function(){return function(e,t){return b.apply(this,arguments)}(t,n)}},"Settle ",r))}}].filter((function(e){return e}));return a.a.createElement(Mn,{emptyLabel:"No balances",dataSource:t,columns:h,pagination:!1})}var Dn,Wn=n(706),Un=n(711),Hn=Object(Ee.c)(re.a)(Dn||(Dn=Object(we.a)(["\n  color: #f23b69;\n  border: 1px solid #f23b69;\n"])));function Jn(e){var t=e.openOrders,n=e.onCancelSuccess,o=e.pageSize,c=e.loading,i=e.marketFilter,d=ye().wallet,f=J(),p=Object(r.useState)(null),m=Object(l.a)(p,2),v=m[0],b=m[1];function h(){return(h=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b(null===t||void 0===t?void 0:t.orderId),e.prev=1,d){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,Ve({order:t,market:t.market,connection:f,wallet:d});case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(1),te({message:"Error cancelling order",description:e.t0.message,type:"error"}),e.abrupt("return");case 12:return e.prev=12,b(null),e.finish(12);case 15:n&&n();case 16:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))).apply(this,arguments)}var g=Object(C.a)(new Set((t||[]).map((function(e){return e.marketName})))).map((function(e){return{text:e,value:e}})),k=[{title:"Market",dataIndex:"marketName",key:"marketName",filters:i?g:void 0,onFilter:function(e,t){return 0===t.marketName.indexOf(e)}},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(Wn.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))},sorter:function(e,t){return e.side===t.side?0:"buy"===e.side?1:-1},showSorterTooltip:!1},{title:"Size",dataIndex:"size",key:"size",sorter:function(e,t){return t.size-e.size},showSorterTooltip:!1},{title:"Price",dataIndex:"price",key:"price",sorter:function(e,t){return t.price-e.price},showSorterTooltip:!1},{key:"orderId",render:function(e){return a.a.createElement("div",{style:{textAlign:"right"}},a.a.createElement(Hn,{icon:a.a.createElement(Un.a,null),onClick:function(){return function(e){return h.apply(this,arguments)}(e)},loading:v+""===(null===e||void 0===e?void 0:e.orderId)+""},"Cancel"))}}],y=(t||[]).map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{key:e.orderId})}));return a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{span:24},a.a.createElement(Mn,{emptyLabel:"No open orders",dataSource:y,columns:k,pagination:!0,pageSize:o||5,loading:void 0!==c&&c})))}var Vn=n(699);function Gn(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=Bt(),n=t.marketName,r=Lt(e),a=Ut(),o=Object(l.a)(a,1),c=o[0];return c&&0!==c.length&&r?r.filter((function(e){return c.some((function(t){return e.openOrders.equals(t.publicKey)}))})).map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{marketName:n})})):null}(),t=Bt().quoteCurrency,n=[{title:"Market",dataIndex:"marketName",key:"marketName"},{title:"Side",dataIndex:"side",key:"side",render:function(e){return a.a.createElement(Wn.a,{color:"buy"===e?"#41C77A":"#F23B69",style:{fontWeight:700}},e.charAt(0).toUpperCase()+e.slice(1))}},{title:"Size",dataIndex:"size",key:"size"},{title:"Price",dataIndex:"price",key:"price"},{title:"Liquidity",dataIndex:"liquidity",key:"liquidity"},{title:t?"Fees (".concat(t,")"):"Fees",dataIndex:"feeCost",key:"feeCost"}],r=(e||[]).map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{key:"".concat(e.orderId).concat(e.side),liquidity:e.eventFlags.maker?"Maker":"Taker"})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{span:24},a.a.createElement(Mn,{dataSource:r,columns:n,pagination:!0,pageSize:5,emptyLabel:"No fills"}))))}function Yn(){var e=$t(),t=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier",render:function(e,t){return a.a.createElement("div",{style:{display:"flex"}},a.a.createElement(Se.a,null,e),0===t.index?a.a.createElement("div",{style:{marginLeft:10}},a.a.createElement(Wn.a,{color:"#41C77A",style:{fontWeight:700}},"Selected")):null)}},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return h.format(Object(Re.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return h.format(Object(Re.getFeeRates)(t.feeTier).maker)}},{title:"Public Key",dataIndex:"pubkey",key:"pubkey",render:function(e){return e.toBase58()}},{title:"Balance",dataIndex:"balance",key:"balance"},{title:"Mint",dataIndex:"mint",key:"mint",render:function(e,t){return t.mint.equals(Re.TokenInstructions.SRM_MINT)?"SRM":t.mint.equals(Re.TokenInstructions.MSRM_MINT)?"MSRM":"UNKNOWN"}}],n=(Object(l.a)(e,1)[0]||[]).map((function(e,t){return Object(Pe.a)(Object(Pe.a)({},e),{},{index:t,key:e.pubkey.toBase58()})}));return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{span:24},a.a.createElement(Mn,{dataSource:n,columns:t,pagination:!0,pageSize:5,emptyLabel:"No (M)SRM accounts"}))),a.a.createElement(Ie.a,{style:{marginTop:8}},a.a.createElement(Ne.a,null,a.a.createElement(Se.a,null,"Holding SRM or MSRM makes you eligible for fee discounts:"),a.a.createElement(Xn,null))))}function Xn(){var e=[{title:"Fee Tier",dataIndex:"feeTier",key:"feeTier"},{title:"Taker",dataIndex:"taker",key:"taker",render:function(e,t){return h.format(Object(Re.getFeeRates)(t.feeTier).taker)}},{title:"Maker",dataIndex:"maker",key:"maker",render:function(e,t){return h.format(Object(Re.getFeeRates)(t.feeTier).maker)}},{title:"Requirements",dataIndex:"requirements",key:"requirements",render:function(e,t){return a.a.createElement(Se.a,null,t.balance?"\u2265 ".concat(t.balance," ").concat(t.token):"None")}}];return a.a.createElement(Mn,{dataSource:[{feeTier:0,taker:.0022,maker:-3e-4,token:"",balance:""},{feeTier:1,taker:.002,maker:-3e-4,token:"SRM",balance:100},{feeTier:2,taker:.0018,maker:-3e-4,token:"SRM",balance:1e3},{feeTier:3,taker:.0016,maker:-3e-4,token:"SRM",balance:1e4},{feeTier:4,taker:.0014,maker:-3e-4,token:"SRM",balance:1e5},{feeTier:5,taker:.0012,maker:-3e-4,token:"SRM",balance:1e6},{feeTier:6,taker:.001,maker:-5e-4,token:"MSRM",balance:1}].map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{key:e.feeTier})})),columns:e})}var Qn=Se.a.Paragraph,Zn=Vn.a.TabPane;function $n(){var e=Bt().market;return a.a.createElement(sn,{style:{flex:1,paddingTop:2}},a.a.createElement(Se.a,null,a.a.createElement(Qn,{style:{color:"rgba(255,255,255,0.5)"}},"Make sure to go to Balances and click Settle to send out your funds."),a.a.createElement(Qn,{style:{color:"rgba(255,255,255,0.5)"}},"To fund your wallet, ",a.a.createElement("a",{href:"https://www.sollet.io"},"sollet.io"),". You can get SOL from FTX, Binance, BitMax, and others. You can get other tokens from FTX."," ")),a.a.createElement(Vn.a,{defaultActiveKey:"orders"},a.a.createElement(Zn,{tab:"Open Orders",key:"orders"},a.a.createElement(er,null)),a.a.createElement(Zn,{tab:"Recent Trade History",key:"fills"},a.a.createElement(Gn,null)),a.a.createElement(Zn,{tab:"Balances",key:"balances"},a.a.createElement(tr,null)),e&&e.supportsSrmFeeDiscounts?a.a.createElement(Zn,{tab:"Fee discounts",key:"fees"},a.a.createElement(Yn,null)):null))}var er=function(){var e=function(){var e=Bt(),t=e.market,n=e.marketName,r=Ht(),a=Dt(),o=a.bidOrderbook,c=a.askOrderbook;return t&&r&&o&&c?t.filterForOpenOrders(o,c,[r]).map((function(e){return Object(Pe.a)(Object(Pe.a)({},e),{},{marketName:n,market:t})})):null}();return a.a.createElement(Jn,{openOrders:e})},tr=function(){var e=nn();return a.a.createElement(Ln,{balances:e})},nr=n(696);function rr(e){var t,n,r,o=e.onClose,c=e.baseOrQuote,i=Bt(),u=i.market,s=i.baseCurrency,l=i.quoteCurrency,d=ye(),f=d.providerName,p=d.providerUrl,m=Yt(),v=Gt();return"base"===c?(t=null===u||void 0===u?void 0:u.baseMintAddress,n=m,r=s):"quote"===c?(t=null===u||void 0===u?void 0:u.quoteMintAddress,n=v,r=l):n=null,t?a.a.createElement(ne.a,{title:r,visible:!!t,onOk:o,onCancel:o},a.a.createElement("div",{style:{paddingTop:"20px"}},a.a.createElement("p",{style:{color:"white"}},"Mint address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},t.toBase58()),a.a.createElement("div",null,a.a.createElement("p",{style:{color:"white"}},"SPL Deposit address:"),a.a.createElement("p",{style:{color:"rgba(255,255,255,0.5)"}},n?n.pubkey.toBase58():a.a.createElement(a.a.Fragment,null,"Visit"," ",a.a.createElement(ee,{external:!0,to:p},f)," ","to create an account for this mint"))))):null}var ar=n(421);function or(e){var t,n=e.accounts,r=e.mint,o=e.label,c=zt(),i=Object(l.a)(c,2),u=i[0],s=i[1];t=r&&r in u?u[r]:n&&(null===n||void 0===n?void 0:n.length)>0?n[0].pubkey.toBase58():void 0;return a.a.createElement(a.a.Fragment,null,o&&a.a.createElement(Ne.a,{span:8},"Token account:"),a.a.createElement(Ne.a,{span:o?13:21},a.a.createElement(Ae.a,{style:{width:"100%"},value:t,onSelect:function(e){if(r){var t=Object(Pe.a)({},u);t[r]=e,s(t)}else te({message:"Error selecting token account",description:"Mint is undefined",type:"error"})}},null===n||void 0===n?void 0:n.map((function(e){return a.a.createElement(Ae.a.Option,{key:e.pubkey.toBase58(),value:e.pubkey.toBase58()},a.a.createElement(Se.a.Text,{code:!0},o?S(e.pubkey,8):e.pubkey.toBase58()))})))),a.a.createElement(Ne.a,{span:2,offset:1},a.a.createElement(re.a,{shape:"round",icon:a.a.createElement(ar.a,null),size:"small",onClick:function(){return t&&navigator.clipboard.writeText(t)}})))}var cr=n(712);function ir(e){var t=e.title,n=e.address,r=e.shorten,o=void 0!==r&&r;return a.a.createElement("div",null,t&&a.a.createElement("p",{style:{color:"white"}},t),a.a.createElement(re.a,{type:"link",icon:a.a.createElement(cr.a,null),href:"https://solscan.io/address/"+n,target:"_blank",rel:"noopener noreferrer",style:{cursor:"pointer"}},o?"".concat(n.slice(0,4),"...").concat(n.slice(-4)):n))}var ur,sr,lr,dr=n(242),fr=a.a.createContext(null);function pr(e){var t=e.children,n=j("autoSettleEnabled",!0),o=Object(l.a)(n,2),c=o[0],i=o[1],f=Jt(),p=Object(l.a)(f,1)[0],m=ye(),b=m.connected,h=m.wallet,g=on(),k=Object(r.useState)(!1),y=Object(l.a)(k,2),O=y[0],w=y[1],E=Object(r.useState)(new Map),x=Object(l.a)(E,2),S=x[0],T=x[1],M=function(e,t){T((function(n){return new Map(n).set(e,t)}))},A=H();return cn((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(h){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,console.log("Settling funds..."),e.next=8,He({connection:A,wallet:h,tokenAccounts:p||[],markets:Object(C.a)(S.values())});case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(4),console.log("Error auto settling funds: "+e.t0.message),e.abrupt("return");case 14:console.log("Finished settling funds.");case 15:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(){return e.apply(this,arguments)}}();b&&(null===h||void 0===h?void 0:h.autoApprove)&&c&&e()}),2e4),cn((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h){e.next=2;break}return e.abrupt("return");case 2:w(!0),t=Object(d.a)(g),e.prev=4,t.s();case 6:if((n=t.n()).done){e.next=24;break}if(r=n.value,!S.has(r.address.toString())){e.next=10;break}return e.abrupt("continue",22);case 10:return e.prev=10,e.next=13,Re.Market.load(A,r.address,{},r.programId);case 13:return a=e.sent,M(r.address.toString(),a),e.next=17,v(1e3);case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(10),console.log("Error fetching market: "+e.t0.message);case 22:e.next=6;break;case 24:e.next=29;break;case 26:e.prev=26,e.t1=e.catch(4),t.e(e.t1);case 29:return e.prev=29,t.f(),e.finish(29);case 32:w(!1);case 33:case"end":return e.stop()}}),e,null,[[4,26,29,32],[10,19]])})));return function(){return e.apply(this,arguments)}}();b&&(null===h||void 0===h?void 0:h.autoApprove)&&c&&!O&&e()}),6e4),a.a.createElement(fr.Provider,{value:{autoSettleEnabled:c,setAutoSettleEnabled:i}},t)}var mr=Object(Ee.c)(Ie.a)(ur||(ur=Object(we.a)(["\n  padding-bottom: 20px;\n"]))),vr=Ee.c.p(sr||(sr=Object(we.a)(["\n  font-size: 12px;\n  padding-top: 6px;\n"]))),br=Object(Ee.c)(re.a)(lr||(lr=Object(we.a)(["\n  color: #3ea018;\n  background-color: #191919;\n  border-width: 0px;\n"])));function hr(){var e=Bt(),t=e.baseCurrency,n=e.quoteCurrency,o=e.market,c=nn(),i=Ht(!0),d=J(),f=ye(),p=f.providerUrl,m=f.providerName,v=f.wallet,b=f.connected,h=Object(r.useState)(""),g=Object(l.a)(h,2),k=g[0],y=g[1],O=Yt(),w=Gt(),E=Jt(),x=Object(l.a)(E,1)[0],S=c&&c.find((function(e){return e.coin===t})),T=c&&c.find((function(e){return e.coin===n})),C=j("autoSettleEnabled",!0),M=Object(l.a)(C,1)[0],A=Object(r.useState)(0),I=Object(l.a)(A,2),N=I[0],_=I[1],P=qn(),R=P.usdcRef,F=P.usdtRef;function K(){return z.apply(this,arguments)}function z(){return(z=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v){e.next=3;break}return te({message:"Wallet not connected",description:"wallet is undefined",type:"error"}),e.abrupt("return");case 3:if(o){e.next=6;break}return te({message:"Error settling funds",description:"market is undefined",type:"error"}),e.abrupt("return");case 6:if(i){e.next=9;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 9:if(O){e.next=12;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 12:if(w){e.next=15;break}return te({message:"Error settling funds",description:"Open orders account is undefined",type:"error"}),e.abrupt("return");case 15:return e.prev=15,e.next=18,We({market:o,openOrders:i,connection:d,wallet:v,baseCurrencyAccount:O,quoteCurrencyAccount:w,usdcRef:R,usdtRef:F});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(15),te({message:"Error settling funds",description:e.t0.message,type:"error"});case 23:case"end":return e.stop()}}),e,null,[[15,20]])})))).apply(this,arguments)}cn((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if((null===S||void 0===S?void 0:S.unsettled)||(null===T||void 0===T?void 0:T.unsettled)){e.next=4;break}return e.abrupt("return");case 4:if(!(Date.now()-N<15e3)){e.next=6;break}return e.abrupt("return");case 6:return e.prev=6,console.log("Settling funds..."),_(Date.now()),e.next=11,We({market:o,openOrders:i,connection:d,wallet:v,baseCurrencyAccount:O,quoteCurrencyAccount:w,usdcRef:R,usdtRef:F});case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(6),console.log("Error auto settling funds: "+e.t0.message),e.abrupt("return");case 17:console.log("Finished settling funds.");case 18:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}();b&&(null===v||void 0===v?void 0:v.autoApprove)&&M&&e()}),1e3);var B=[[t,S,"base",null===o||void 0===o?void 0:o.baseMintAddress.toBase58()],[n,T,"quote",null===o||void 0===o?void 0:o.quoteMintAddress.toBase58()]];return a.a.createElement(sn,{style:{flex:1,paddingTop:10}},B.map((function(e,t){var n=Object(l.a)(e,4),r=n[0],o=n[1],c=n[2],i=n[3];return a.a.createElement(a.a.Fragment,{key:t},a.a.createElement(nr.a,{style:{borderColor:"white"}},r," ",i&&a.a.createElement(_e.a,{content:a.a.createElement(ir,{address:i}),placement:"bottomRight",title:"Token mint",trigger:"hover"},a.a.createElement(dr.a,{style:{color:"#3ea018"}}))),b&&a.a.createElement(mr,{align:"middle",style:{paddingBottom:10}},a.a.createElement(or,{accounts:null===x||void 0===x?void 0:x.filter((function(e){return e.effectiveMint.toBase58()===i})),mint:i,label:!0})),a.a.createElement(mr,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(Ne.a,null,"Wallet balance:"),a.a.createElement(Ne.a,null,o&&o.wallet)),a.a.createElement(mr,{align:"middle",justify:"space-between",style:{paddingBottom:12}},a.a.createElement(Ne.a,null,"Unsettled balance:"),a.a.createElement(Ne.a,null,o&&o.unsettled)),a.a.createElement(mr,{align:"middle",justify:"space-around"},a.a.createElement(Ne.a,{style:{width:150}},a.a.createElement(br,{block:!0,size:"large",onClick:function(){return y(c)}},"Deposit")),a.a.createElement(Ne.a,{style:{width:150}},a.a.createElement(br,{block:!0,size:"large",onClick:K},"Settle"))),a.a.createElement(vr,null,"All deposits go to your"," ",a.a.createElement(ee,{external:!0,to:p},m)," ","wallet"))})),a.a.createElement(rr,{baseOrQuote:k,onClose:function(){return y("")}}))}var gr,kr,yr,Or,wr=n(236),Er=n(703),xr=n(700),jr=n(708),Sr=Object(Ee.c)(re.a)(gr||(gr=Object(we.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #f23b69;\n  border-color: #f23b69;\n"]))),Tr=Object(Ee.c)(re.a)(kr||(kr=Object(we.a)(["\n  margin: 20px 0px 0px 0px;\n  background: #02bf76;\n  border-color: #02bf76;\n"]))),Cr={0:"0%",25:"25%",50:"50%",75:"75%",100:"100%"};function Mr(e){var t=e.style,n=e.setChangeOrderRef,o=Object(r.useState)("buy"),c=Object(l.a)(o,2),i=c[0],d=c[1],f=Bt(),p=f.baseCurrency,m=f.quoteCurrency,v=f.market,b=Qt(),h=Xt(),O=Yt(),w=Gt(),E=Ht(!0),x=ye(),j=x.wallet,S=x.connected,T=J(),C=qt();$t();var M=Zt().storedFeeDiscountKey,A=Object(r.useState)(!1),I=Object(l.a)(A,2),N=I[0],_=I[1],P=Object(r.useState)(!1),R=Object(l.a)(P,2),F=R[0],K=R[1],z=Object(r.useState)(void 0),L=Object(l.a)(z,2),D=L[0],W=L[1],U=Object(r.useState)(void 0),H=Object(l.a)(U,2),V=H[0],G=H[1],Y=Object(r.useState)(void 0),X=Object(l.a)(Y,2),Q=X[0],Z=X[1],$=Object(r.useState)(!1),ee=Object(l.a)($,2),ne=ee[0],re=ee[1],ae=Object(r.useState)(0),oe=Object(l.a)(ae,2),ce=oe[0],ie=oe[1],ue=(h||0)+((E&&v?v.quoteSplSizeToNumber(E.quoteTokenFree):0)||0),se=b||0,le=(null===v||void 0===v?void 0:v.minOrderSize)&&y(v.minOrderSize),de=(null===v||void 0===v?void 0:v.tickSize)&&y(v.tickSize),fe=null===j||void 0===j?void 0:j.publicKey;Object(r.useEffect)((function(){n&&n(me)}),[n]),Object(r.useEffect)((function(){D&&Q&&be(ce)}),[i]),Object(r.useEffect)((function(){ve()}),[Q,D]),Object(r.useEffect)((function(){var e=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j&&fe&&v){e.next=4;break}return console.log("Skipping refreshing accounts"),e.abrupt("return");case 4:return t=$e(),console.log("Refreshing accounts for ".concat(v.address)),e.next=8,null===v||void 0===v?void 0:v.findOpenOrdersAccountsForOwner(T,fe);case 8:return e.next=10,null===v||void 0===v?void 0:v.findBestFeeDiscountKey(T,fe);case 10:n=$e(),console.log("Finished refreshing accounts for ".concat(v.address," after ").concat(n-t)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log("Encountered error when refreshing trading accounts: ".concat(e.t0));case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval(e,3e4);return function(){return clearInterval(t)}}),[v,T,j,fe]);var pe=function(e){if(W(e),e){var t=Q||C;if(t){var n=e&&k(e*t,le);G(n)}else G(void 0)}else G(void 0)},me=function(e){var t=e.size,n=e.price,r=t&&k(t,le),a=n&&k(n,de);r&&pe(r),a&&Z(a)},ve=function(){var e=g("buy"===i?ue/(Q||C||1):se,le),t=Math.min((D||0)/e*100,100);ie(t)},be=function(e){if(!Q&&C){var t=de?C.toFixed(de):C;Z("number"===typeof t?t:parseFloat(t))}var n;"buy"===i?(Q||C)&&(n=ue/(Q||C||1)*e/100):n=se*e/100;var r=g(n,le);pe(r)};function he(){return ge.apply(this,arguments)}function ge(){return(ge=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q){e.next=6;break}return console.warn("Missing price"),te({message:"Missing price",type:"error"}),e.abrupt("return");case 6:if(D){e.next=10;break}return console.warn("Missing size"),te({message:"Missing size",type:"error"}),e.abrupt("return");case 10:if(re(!0),e.prev=11,j){e.next=14;break}return e.abrupt("return",null);case 14:return e.next=16,Qe({side:i,price:Q,size:D,orderType:F?"ioc":N?"postOnly":"limit",market:v,connection:T,wallet:j,baseCurrencyAccount:null===O||void 0===O?void 0:O.pubkey,quoteCurrencyAccount:null===w||void 0===w?void 0:w.pubkey,feeDiscountPubkey:M});case 16:B(Object(q.a)("getTokenAccounts",j,S)),Z(void 0),pe(void 0),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(11),console.warn(e.t0),te({message:"Error placing order",description:e.t0.message,type:"error"});case 25:return e.prev=25,re(!1),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[11,21,25,28]])})))).apply(this,arguments)}return a.a.createElement(sn,{style:Object(Pe.a)({display:"flex",flexDirection:"column"},t)},a.a.createElement("div",{style:{flex:1}},a.a.createElement(wr.a.Group,{onChange:function(e){return d(e.target.value)},value:i,buttonStyle:"solid",style:{marginBottom:8,width:"100%"}},a.a.createElement(wr.a.Button,{value:"buy",style:{width:"50%",textAlign:"center",background:"buy"===i?"#02bf76":"",borderColor:"buy"===i?"#02bf76":""}},"BUY"),a.a.createElement(wr.a.Button,{value:"sell",style:{width:"50%",textAlign:"center",background:"sell"===i?"#F23B69":"",borderColor:"sell"===i?"#F23B69":""}},"SELL")),a.a.createElement(Er.a,{style:{textAlign:"right",paddingBottom:8},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Price"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},m),value:Q,type:"number",step:(null===v||void 0===v?void 0:v.tickSize)||1,onChange:function(e){return Z(parseFloat(e.target.value))}}),a.a.createElement(Er.a.Group,{compact:!0,style:{paddingBottom:8}},a.a.createElement(Er.a,{style:{width:"calc(50% + 30px)",textAlign:"right"},addonBefore:a.a.createElement("div",{style:{width:"30px"}},"Size"),suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},p),value:D,type:"number",step:(null===v||void 0===v?void 0:v.minOrderSize)||1,onChange:function(e){return pe(parseFloat(e.target.value))}}),a.a.createElement(Er.a,{style:{width:"calc(50% - 30px)",textAlign:"right"},suffix:a.a.createElement("span",{style:{fontSize:10,opacity:.5}},m),value:V,type:"number",step:(null===v||void 0===v?void 0:v.minOrderSize)||1,onChange:function(e){return function(e){if(G(e),e){var t=Q||C;if(t){var n=e&&k(e/t,le);W(n)}else W(void 0)}else W(void 0)}(parseFloat(e.target.value))}})),a.a.createElement(xr.a,{value:ce,tipFormatter:function(e){return"".concat(e,"%")},marks:Cr,onChange:be}),a.a.createElement("div",{style:{paddingTop:18}},"POST ",a.a.createElement(jr.a,{checked:N,onChange:function(e){e&&K(!1),_(e)},style:{marginRight:40}}),"IOC ",a.a.createElement(jr.a,{checked:F,onChange:function(e){e&&_(!1),K(e)}}))),"buy"===i?a.a.createElement(Tr,{disabled:!Q||!D,onClick:he,block:!0,type:"primary",size:"large",loading:ne},"Buy ",p):a.a.createElement(Sr,{disabled:!Q||!D,onClick:he,block:!0,type:"primary",size:"large",loading:ne},"Sell ",p))}var Ar=Ee.c.div(yr||(yr=Object(we.a)(["\n  color: rgba(255, 255, 255, 1);\n"]))),Ir=Object(Ee.c)(Ie.a)(Or||(Or=Object(we.a)(["\n  padding: 0px 0 14px;\n  color: rgba(255, 255, 255, 1);\n"])));function Nr(e){var t=e.smallScreen,n=Bt(),r=n.baseCurrency,o=n.quoteCurrency,c=n.market,i=function(){var e=Bt().market,t=null===e||void 0===e?void 0:e.address.toBase58();function n(){return(n=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.next=4,Tt.getRecentTrades(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return z((function(){return n.apply(this,arguments)}),Object(q.a)("getBonfidaTrades",t),{refreshInterval:5e3},!1)}(),d=Object(l.a)(i,2),f=d[0],p=d[1];return a.a.createElement(sn,{style:t?{flex:1}:{marginTop:"10px",minHeight:"270px",maxHeight:"calc(100vh - 700px)"}},a.a.createElement(Ar,null,"Recent Market trades"),a.a.createElement(Ir,null,a.a.createElement(Ne.a,{span:8},"Price (",o,") "),a.a.createElement(Ne.a,{span:8,style:{textAlign:"right"}},"Size (",r,")"),a.a.createElement(Ne.a,{span:8,style:{textAlign:"right"}},"Time")),!!f&&p&&a.a.createElement("div",{style:{marginRight:"-20px",paddingRight:"5px",overflowY:"scroll",maxHeight:t?"calc(100% - 75px)":"calc(100vh - 570px)"}},f.map((function(e,t){return a.a.createElement(Ie.a,{key:t,style:{marginBottom:4}},a.a.createElement(Ne.a,{span:8,style:{color:"buy"===e.side?"#41C77A":"#F23B69"}},(null===c||void 0===c?void 0:c.tickSize)&&!isNaN(e.price)?Number(e.price).toFixed(y(c.tickSize)):e.price),a.a.createElement(Ne.a,{span:8,style:{textAlign:"right"}},(null===c||void 0===c?void 0:c.minOrderSize)&&!isNaN(e.size)?Number(e.size).toFixed(y(c.minOrderSize)):e.size),a.a.createElement(Ne.a,{span:8,style:{textAlign:"right",color:"#44a59"}},e.time&&new Date(e.time).toLocaleTimeString()))}))))}var _r=n(307),Pr=n.n(_r),Rr=n(409),Fr=n.n(Rr),Kr=Se.a.Title;function zr(e){var t=e.switchToLiveMarkets,n=function(){var e=rn(),t=j("customMarkets",[]),n=Object(l.a)(t,1)[0];if(!e)return null;var r=[];return e.forEach((function(e){var t=e.market,a=e.openOrdersList,o=Pt(t,n),c=o.baseCurrency,i=o.quoteCurrency,u=o.marketName;c&&i&&t&&(a||[]).forEach((function(e){var n=(null===e||void 0===e?void 0:e.baseTokenTotal)&&(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenTotal.sub(e.baseTokenFree)),a=(null===e||void 0===e?void 0:e.quoteTokenTotal)&&(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenTotal.sub(e.quoteTokenFree)),o=(null===e||void 0===e?void 0:e.baseTokenFree)&&t.baseSplSizeToNumber(e.baseTokenFree),s=(null===e||void 0===e?void 0:e.quoteTokenFree)&&t.baseSplSizeToNumber(e.quoteTokenFree);r.push({marketName:u,market:t,coin:c,key:"".concat(u).concat(c),orders:n,unsettled:o,openOrders:e}),r.push({marketName:u,market:t,coin:i,key:"".concat(u).concat(i),orders:a,unsettled:s,openOrders:e})}))})),r}(),r=function(){var e=ye(),t=e.connected,n=e.wallet,r=Rt().customMarkets,a=H(),o=rn(),c=o&&o.map((function(e){return e.market})),i=c&&c.filter((function(e){return!!e})).map((function(e){return e.address.toBase58()}));function d(){return(d=Object(s.a)(u.a.mark((function e(){var o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&n){e.next=2;break}return e.abrupt("return",null);case 2:if(c){e.next=4;break}return e.abrupt("return",null);case 4:return console.log("refreshing getOpenOrdersForDeprecatedMarkets"),o=function(){var e=Object(s.a)(u.a.mark((function e(t){var o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return o=Pt(t,r),c=o.marketName,e.prev=3,console.log("Fetching open orders for",c),e.next=7,t.loadOrdersForOwner(a,n.publicKey);case 7:return e.abrupt("return",e.sent.map((function(e){return Object(Pe.a)({marketName:c,market:t},e)})));case 10:return e.prev=10,e.t0=e.catch(3),console.log("Failed loading open orders",t.address.toBase58(),e.t0),te({message:"Error loading open orders for deprecated ".concat(c),description:e.t0.message,type:"error"}),e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}(),e.next=8,Promise.all(c.map(o));case 8:return e.abrupt("return",e.sent.filter((function(e){return!!e})).flat());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=Object(q.a)("getOpenOrdersForDeprecatedMarkets",t,a,n,i&&i.toString()),p=z((function(){return d.apply(this,arguments)}),f,{refreshInterval:Nt}),m=Object(l.a)(p,2),v=m[0],b=m[1];return console.log("openOrders",v),{openOrders:v,loaded:b,refreshOpenOrders:function(){return B(f)}}}(),o=r.openOrders,c=r.loaded,i=r.refreshOpenOrders,d=At().refresh,f=!o||o.length>0,p=n&&n.filter((function(e){var t=e.orders,n=e.unsettled;return t>0||n>0})),m=p&&p.length>0;return a.a.createElement(sn,null,a.a.createElement(Kr,{level:4,style:{color:"rgba(255, 255, 255, 1)"}},"Migrate new markets"),a.a.createElement(Se.a,null,"Markets on older versions of the DEX or using Wrapped USDT are now deprecated. To migrate over to the new markets, please cancel your orders and settle your funds on old markets. To convert from Wrapped USDT to Native USDT use sollet.io."),a.a.createElement("div",{style:{marginTop:20,display:"flex",justifyContent:"center"}},a.a.createElement(re.a,{onClick:function(){return d(!0)}},a.a.createElement(Fr.a,null)," Refresh data")),n?a.a.createElement(a.a.Fragment,null,a.a.createElement(nr.a,null,!f&&a.a.createElement(Pr.a,null)," Cancel your orders"),f?c?a.a.createElement(Jn,{openOrders:o,onCancelSuccess:function(){setTimeout((function(){d(),i()}),1e3)}}):a.a.createElement(je.a,{size:"large"}):null,a.a.createElement(nr.a,null,!m&&a.a.createElement(Pr.a,null)," Settle your funds"),m&&a.a.createElement(Ln,{balances:p,hideWalletBalance:!0,showMarket:!0,onSettleSuccess:function(){setTimeout(d,1e3)}}),a.a.createElement(nr.a,null,"Switch to upgraded markets"),a.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},a.a.createElement(re.a,{onClick:t,disabled:m||f},"Switch to new markets"))):a.a.createElement(je.a,{size:"large"}))}var Br,qr=n(309),Lr=Ae.a.Option,Dr=Ae.a.OptGroup,Wr=Ee.c.div(Br||(Br=Object(we.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n"])));function Ur(){var e=Object(Me.i)().marketAddress;Object(r.useEffect)((function(){e&&localStorage.setItem("marketAddress",JSON.stringify(e))}),[e]);var t=Object(Me.g)();return a.a.createElement(Ft,{marketAddress:e,setMarketAddress:function(e){t.push(Kt(e))}},a.a.createElement(Hr,null))}function Hr(){var e=Bt(),t=e.market,n=e.marketName,o=e.customMarkets,c=Ct.filter((function(e){var t=e.name;return!e.deprecated&&!"[]".includes(t)})),i=Object(r.useState)(!1),u=Object(l.a)(i,2),s=u[0],d=u[1],f=rn(),p=Object(r.useState)({height:window.innerHeight,width:window.innerWidth}),m=Object(l.a)(p,2),v=m[0],b=m[1];Object(r.useEffect)((function(){document.title=n?"".concat(n," \u2014 Serum"):"Serum"}),[n]);var h=Object(r.useRef)();Object(r.useEffect)((function(){var e=function(){b({height:window.innerHeight,width:window.innerWidth})};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]);var g=null===v||void 0===v?void 0:v.width,k={onChangeOrderRef:function(e){return h.current=e},onPrice:Object(r.useCallback)((function(e){return h.current&&h.current({price:e})}),[]),onSize:Object(r.useCallback)((function(e){return h.current&&h.current({size:e})}),[])},y=s?a.a.createElement(Vr,{switchToLiveMarkets:function(){return d(!1)}}):g<1e3?a.a.createElement(Yr,k):a.a.createElement(Gr,k);return a.a.createElement(a.a.Fragment,null,a.a.createElement(Wr,null,a.a.createElement(Ie.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},a.a.createElement(Ne.a,null,a.a.createElement(Jr,{markets:c,setHandleDeprecated:d,placeholder:"Select market",customMarkets:o,onDeleteCustomMarket:"onDeleteCustomMarket"})),t?a.a.createElement(Ne.a,null,a.a.createElement(_e.a,{content:a.a.createElement(ir,{address:t.publicKey.toBase58()}),placement:"bottomRight",title:"Market address",trigger:"click"},a.a.createElement(dr.a,{style:{color:"#3ea018"}}))):null,a.a.createElement(Ne.a,null),f&&f.length>0&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Ne.a,null,a.a.createElement(Se.a,null,"You have unsettled funds on old markets! Please go through them to claim your funds.")),a.a.createElement(Ne.a,null,a.a.createElement(re.a,{onClick:function(){return d(!s)}},s?"View new markets":"Handle old markets")))),y))}function Jr(e){var t,n,r=e.markets,o=e.placeholder,c=e.setHandleDeprecated,i=e.customMarkets,u=e.onDeleteCustomMarket,s=Bt(),l=s.market,d=s.setMarketAddress,f=function(e){return e.split("/")[0]},p=function(e){return e.split("/")[1]},m=null===(t=an(i).find((function(e){return(null===l||void 0===l?void 0:l.address)&&e.address.equals(l.address)})))||void 0===t||null===(n=t.address)||void 0===n?void 0:n.toBase58();return a.a.createElement(Ae.a,{showSearch:!0,size:"large",style:{width:200},placeholder:o||"Select a market",optionFilterProp:"name",onSelect:function(e){c(!1),d(e)},listHeight:400,value:m,filterOption:function(e,t){var n;return(null===t||void 0===t||null===(n=t.name)||void 0===n?void 0:n.toLowerCase().indexOf(e.toLowerCase()))>=0}},i&&i.length>0&&a.a.createElement(Dr,{label:"Custom"},i.map((function(e,t){var n=e.address,r=e.name;return a.a.createElement(Lr,{value:n,key:Object(qr.a)(),name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{flex:"auto"},r),m!==n&&a.a.createElement(Ne.a,null,a.a.createElement(Un.a,{onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),u&&u(n)}}))))}))),a.a.createElement(Dr,{label:"Markets"},r.sort((function(e,t){return"USDT"===p(e.name)&&"USDT"!==p(t.name)?-1:"USDT"!==p(e.name)&&"USDT"===p(t.name)?1:0})).sort((function(e,t){return f(e.name)<f(t.name)?-1:f(e.name)>f(t.name)?1:0})).map((function(e,t){var n=e.address,r=e.name,o=e.deprecated;return a.a.createElement(Lr,{value:n.toBase58(),key:Object(qr.a)(),name:r,style:{padding:"10px",backgroundColor:t%2===0?"rgb(39, 44, 61)":null}},r," ",o?" (Deprecated)":null)}))))}var Vr=function(e){var t=e.switchToLiveMarkets;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{flex:"auto"},a.a.createElement(zr,{switchToLiveMarkets:t}))))},Gr=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie.a,{style:{height:"900px"}},a.a.createElement(Ne.a,{flex:"auto",style:{height:"100%",display:"flex"}},a.a.createElement(xn,{smallScreen:!0,depth:13,onPrice:n,onSize:r})),a.a.createElement(Ne.a,{flex:"auto",style:{height:"100%",display:"flex"}},a.a.createElement(Nr,{smallScreen:!0})),a.a.createElement(Ne.a,{flex:"400px",style:{height:"100%",display:"flex",flexDirection:"column"}},a.a.createElement(Mr,{setChangeOrderRef:t}),a.a.createElement(hr,null))),a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{flex:"auto"},a.a.createElement($n,null))))},Yr=function(e){var t=e.onChangeOrderRef,n=e.onPrice,r=e.onSize;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(Mr,{style:{flex:1},setChangeOrderRef:t})),a.a.createElement(Ne.a,{xs:24,sm:12},a.a.createElement(hr,null))),a.a.createElement(Ie.a,{style:{height:"500px"}},a.a.createElement(Ne.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(xn,{smallScreen:!0,onPrice:n,onSize:r})),a.a.createElement(Ne.a,{xs:24,sm:12,style:{height:"100%",display:"flex"}},a.a.createElement(Nr,{smallScreen:!0}))),a.a.createElement(Ie.a,null,a.a.createElement(Ne.a,{flex:"auto"},a.a.createElement($n,null))))},Xr=n(137),Qr=n(237);function Zr(){var e,t=ye(),n=t.connected,r=t.wallet,o=t.select,c=t.connect,i=t.disconnect,u=n&&(null===r||void 0===r||null===(e=r.publicKey)||void 0===e?void 0:e.toBase58())||"",s=a.a.createElement(Xr.a,null,n&&a.a.createElement(ir,{shorten:!0,address:u}),a.a.createElement(Xr.a.Item,{key:"3",onClick:o},"Change Wallet"));return a.a.createElement(Qr.a.Button,{onClick:n?i:c,overlay:s},n?"Disconnect":"Connect")}function $r(){var e=ye().connected,t=function(){var e=H(),t=ye(),n=t.connected,a=t.wallet,o=Object(r.useState)(!1),c=Object(l.a)(o,2),i=c[0],d=c[1],f=Object(r.useState)(0),p=Object(l.a)(f,2),m=p[0],b=p[1],h=Object(r.useState)(null),g=Object(l.a)(h,2),k=g[0],y=g[1],O=Object(r.useState)(0),w=Object(l.a)(O,2),E=w[0],x=w[1];return Object(r.useEffect)((function(){n&&a&&function(){var t=Object(s.a)(u.a.mark((function t(){var n,r;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return d(!1),n=[],r=function(){var t=Object(s.a)(u.a.mark((function t(r){var o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(1e3*Math.random());case 2:return t.prev=2,t.next=5,Re.Market.load(e,r.address,void 0,r.programId);case 5:return o=t.sent,t.next=8,o.loadOrdersForOwner(e,null===a||void 0===a?void 0:a.publicKey,3e4);case 8:c=t.sent,n.push({orders:c,marketAddress:r.address.toBase58()}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),console.warn("Error loading open order ".concat(r.name," - ").concat(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),t.next=5,Promise.all(Ct.map((function(e){return r(e)})));case 5:y(n),x((new Date).getTime()),d(!0);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[e,n,a,m]),{openOrders:k,loaded:i,refreshOpenOrders:function(){(new Date).getTime()-E>1e4?b((function(e){return e+1})):console.log("not refreshing")}}}(),n=t.openOrders,o=t.loaded,c=t.refreshOpenOrders,i=on(),d=Object.fromEntries(i.map((function(e){return[e.address.toBase58(),e.name]}))),f=Mt(),p=Object(l.a)(f,1)[0],m=Object.fromEntries((p||[]).map((function(e){return[e.market.address.toBase58(),e.market]}))),b=(n||[]).map((function(e){return e.orders.map((function(t){return Object(Pe.a)({marketName:d[e.marketAddress],market:m[e.marketAddress]},t)}))})).flat();return e?a.a.createElement(sn,{style:{flex:1,paddingTop:10}},a.a.createElement(re.a,{onClick:c,loading:!o},"Refresh"),a.a.createElement(Jn,{openOrders:b,pageSize:25,loading:!o,onCancelSuccess:c,marketFilter:!0})):a.a.createElement(Ie.a,{justify:"center",style:{marginTop:"10%"}},a.a.createElement(Zr,null))}function ea(e){var t=e.walletBalances,n=H(),o=ye(),c=o.wallet,i=o.connected,d=zt(),p=Object(l.a)(d,1)[0],m=Jt(),v=Object(l.a)(m,2),b=v[0],h=v[1],g=Mt(),k=Object(l.a)(g,2),y=k[0],O=k[1],w=Object(r.useState)(!1),E=Object(l.a)(w,2),x=E[0],j=E[1];function T(){return(T=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j(!0),e.prev=1,c){e.next=5;break}return te({message:"Wallet not connected",description:"Wallet not connected",type:"error"}),e.abrupt("return");case 5:if(b&&h){e.next=8;break}return te({message:"Error settling funds",description:"TokenAccounts not connected",type:"error"}),e.abrupt("return");case 8:if(y&&O){e.next=11;break}return te({message:"Error settling funds",description:"Markets not connected",type:"error"}),e.abrupt("return");case 11:return e.next=13,He({connection:n,tokenAccounts:b,selectedTokenAccounts:p,wallet:c,markets:y.map((function(e){return e.market}))});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),te({message:"Error settling funds",description:e.t0.message,type:"error"});case 18:return e.prev=18,j(!1),e.finish(18);case 21:case"end":return e.stop()}}),e,null,[[1,15,18,21]])})))).apply(this,arguments)}var C=[{title:"Coin",key:"coin",width:"20%",render:function(e){return a.a.createElement(Ie.a,{align:"middle"},a.a.createElement("a",{href:"https://solscan.io/address/".concat(e.mint),target:"_blank",rel:"noopener noreferrer"},e.coin||S(new f.PublicKey(e.mint))))}},{title:"Wallet Balance",dataIndex:"walletBalance",key:"walletBalance",width:"20%"},{title:"Open orders total balances",dataIndex:"openOrdersTotal",key:"openOrdersTotal",width:"20%"},{title:"Unsettled balances",dataIndex:"openOrdersFree",key:"openOrdersFree",width:"20%"},{title:"Selected token account",key:"selectTokenAccount",width:"20%",render:function(e){return a.a.createElement(Ie.a,{align:"middle",style:{width:"430px"}},a.a.createElement(or,{accounts:null===b||void 0===b?void 0:b.filter((function(t){return t.effectiveMint.toBase58()===e.mint})),mint:e.mint}))}}];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Mn,{emptyLabel:"No balances",dataSource:t,columns:C,pagination:!1}),i&&a.a.createElement(re.a,{onClick:function(){return T.apply(this,arguments)},loading:x},"Settle all funds"))}var ta=Vn.a.TabPane;function na(){var e=function(){var e=Jt(),t=Object(l.a)(e,1)[0],n=ye().connected,r=St(),a=Object(l.a)(r,2),o=a[0],c=a[1];if(!n||!c)return[];var i,u={},s=Object(d.a)(t||[]);try{for(s.s();!(i=s.n()).done;){var f=i.value;if(f.account){var p=void 0;(p=f.effectiveMint.equals(Ke.WRAPPED_SOL_MINT)?{mint:Ke.WRAPPED_SOL_MINT,owner:f.pubkey,amount:f.account.lamports}:gt(f.account.data)).mint.toBase58()in u||(u[p.mint.toBase58()]=0);var v=o&&o[p.mint.toBase58()],b=O(new m.a(p.amount),w((null===v||void 0===v?void 0:v.decimals)||0));u[p.mint.toBase58()]+=b}}}catch(h){s.e(h)}finally{s.f()}return Object.entries(u).map((function(e){var t=Object(l.a)(e,2);return{mint:t[0],balance:t[1]}}))}(),t=function(){var e=Rt().customMarkets;return Object(r.useMemo)((function(){return Object.fromEntries(Re.TOKEN_MINTS.map((function(e){return[e.address.toBase58(),e.name]})))}),[e.length])}(),n=en(),o=(e||[]).map((function(e){var r,a={coin:t[e.mint],mint:e.mint,walletBalance:e.balance,openOrdersFree:0,openOrdersTotal:0},o=Object(d.a)(n[e.mint]||[]);try{for(o.s();!(r=o.n()).done;){var c=r.value;a.openOrdersFree+=c.free,a.openOrdersTotal+=c.total}}catch(i){o.e(i)}finally{o.f()}return a}));return a.a.createElement(sn,{style:{flex:1,paddingTop:10}},a.a.createElement(Vn.a,{defaultActiveKey:"walletBalances"},a.a.createElement(ta,{tab:"Wallet Balances",key:"walletBalances"},a.a.createElement(ea,{walletBalances:o}))))}var ra=n(697),aa=n(713),oa=n(714),ca=n(410),ia=n.n(ca),ua=Se.a.Paragraph;function sa(e){var t=e.autoApprove,n=function(){var e=Object(r.useContext)(fr);if(!e)throw new Error("Missing preferences context");return{autoSettleEnabled:e.autoSettleEnabled,setAutoSettleEnabled:e.setAutoSettleEnabled}}(),o=n.autoSettleEnabled,c=n.setAutoSettleEnabled;return a.a.createElement("div",null,a.a.createElement(jr.a,{style:{marginRight:10},disabled:!t,checked:t&&o,onChange:c})," ","Auto settle",!t&&a.a.createElement(ua,{style:{color:"rgba(255,255,255,0.5)",marginTop:10}},"To use auto settle, first enable auto approval in your wallet"))}function la(e){var t=e.visible,n=e.testingConnection,o=e.onAddCustomEndpoint,c=e.onClose,i=Object(r.useState)(""),u=Object(l.a)(i,2),s=u[0],d=u[1],f=Object(r.useState)(""),p=Object(l.a)(f,2),m=p[0],v=p[1],b=function(){d(""),v(""),c&&c()},h=""!==s&&""!==m;return a.a.createElement(ne.a,{title:"Add custom endpoint",visible:t,onOk:function(){o({name:m,endpoint:"https://"+s,custom:!0}),b()},okText:"Add",onCancel:b,okButtonProps:{disabled:!h,loading:n}},a.a.createElement(Ie.a,{style:{marginBottom:8}},a.a.createElement(Ne.a,{span:24},a.a.createElement(Er.a,{placeholder:"Cluster Name",value:m,onChange:function(e){return v(e.target.value)}}))),a.a.createElement(Ie.a,{style:{marginBottom:8}},a.a.createElement(Ne.a,{span:24},a.a.createElement(Er.a,{placeholder:"Cluster Endpoint",value:s,addonBefore:"https://",onChange:function(e){return d(e.target.value)}}))))}var da,fa,pa=n(247),ma=n(411),va=n.n(ma),ba=Ae.a.Option,ha=va.a.concat(Re.TOKEN_MINTS.map((function(e){return{name:"".concat(e.name," SPL"),url:"https://solscan.io/address/".concat(e.address.toBase58()),description:"".concat(e.name," SPL token"),icon:"",tags:["token","blockchain","solana","spl","solana",e.address.toBase58()]}})));function ga(e){var t=Object(r.useState)([]),n=Object(l.a)(t,2),o=n[0],c=n[1],i=Object(r.useState)(void 0),u=Object(l.a)(i,2),s=u[0],d=u[1],f=function(){c([]),d(void 0)},p=o.map((function(e){return a.a.createElement(ba,{key:e.name,value:e.name,href:e.url},a.a.createElement("h3",null,e.name),a.a.createElement(Se.a.Text,{type:"secondary"},e.url.replace("https://","")))})),m=Object(r.useRef)();return a.a.createElement(Ae.a,{ref:m,showSearch:!0,allowClear:!0,value:s,placeholder:e.focussed||void 0===e.focussed?"Search for dex, swap, wallet, token...":"",onSearch:function(e){d(""===e?void 0:e);var t=ha.filter((function(t){return function(e,t){var n=e.toLowerCase();return t.name.toLowerCase().includes(n)||t.tags.some((function(e){return e.toLowerCase().includes(n)||n.includes(e.toLowerCase())}))}(e,t)}));c(t)},onClear:f,onSelect:function(e,t){window.open(t.href,"_blank"),f()},onFocus:e.onFocus,onBlur:function(){e.onBlur(),f()},notFoundContent:null,style:{width:e.width||"300px",transition:e.focussed?"width 0.1s ease 0.1s":""},dropdownStyle:{width:e.width||"300px"},dropdownMatchSelectWidth:!1,suffixIcon:a.a.createElement(pa.a,{onClick:function(){return m.current&&m.current.focus()}}),filterOption:!1},p)}var ka=Ee.c.div(da||(da=Object(we.a)(["\n  background-color: #191919;\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-end;\n  padding: 0px 30px;\n  flex-wrap: wrap;\n"]))),ya=Ee.c.div(fa||(fa=Object(we.a)(["\n  display: flex;\n  align-items: center;\n  color: #3ea018;\n  font-weight: bold;\n  cursor: pointer;\n  img {\n    height: 30px;\n    margin-right: 8px;\n  }\n"]))),Oa={"/learn":"https://docs.projectserum.com/trade-on-serum-dex/trade-on-serum-dex-1","/add-market":"https://serum-academy.com/en/add-market/","/wallet-support":"https://serum-academy.com/en/wallet-support","/dex-list":"https://serum-academy.com/en/dex-list/","/developer-resources":"https://serum-academy.com/en/developer-resources/","/explorer":"https://solscan.io","/srm-faq":"https://projectserum.com/srm-faq"};function wa(){var e=ye(),t=e.connected,n=e.wallet,o=V(),c=o.endpoint,i=o.endpointInfo,u=o.setEndpoint,s=o.availableEndpoints,d=o.setCustomEndpoints,p=Object(r.useState)(!1),m=Object(l.a)(p,2),v=m[0],b=m[1],h=Object(r.useState)(!1),g=Object(l.a)(h,2),k=g[0],y=g[1],O=Object(Me.h)(),w=Object(Me.g)(),E=Object(r.useState)(!1),x=Object(l.a)(E,2),j=x[0],S=x[1],T=Object(r.useCallback)((function(e){e.key in Oa||w.push(e.key)}),[w]),M=i&&i.custom;Object(r.useEffect)((function(){var e=function(){M&&u(L[0].endpoint)};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}}),[M,u]);var A=O.pathname.startsWith("/market/")?O.pathname:Kt();return a.a.createElement(a.a.Fragment,null,a.a.createElement(la,{visible:v,testingConnection:k,onAddCustomEndpoint:function(e){if(s.some((function(t){return t.endpoint===e.endpoint})))te({message:"An endpoint with the given url already exists",type:"error"});else{var t=function(t){console.log("Connection to ".concat(e.endpoint," failed: ").concat(t)),te({message:"Failed to connect to ".concat(e.endpoint),type:"error"})};try{new f.Connection(e.endpoint,"recent").getBlockTime(0).then((function(){y(!0),console.log("testing connection to ".concat(e.endpoint));var t=[].concat(Object(C.a)(s.filter((function(e){return e.custom}))),[e]);u(e.endpoint),d(t)})).catch(t)}catch(n){t(n)}finally{y(!1)}}},onClose:function(){return b(!1)}}),a.a.createElement(ka,null,a.a.createElement(ya,{onClick:function(){return w.push(A)}},a.a.createElement("img",{src:ia.a,alt:""}),"SeeleFinance DEX"),a.a.createElement(Xr.a,{mode:"horizontal",onClick:T,selectedKeys:[O.pathname],style:{borderBottom:"none",backgroundColor:"transparent",display:"flex",alignItems:"flex-end",flex:1}},a.a.createElement(Xr.a.Item,{key:A,style:{color:"white"}},"TRADE"),t&&(!j||"/balances"===O.pathname)&&a.a.createElement(Xr.a.Item,{key:"/balances",style:{margin:"white"}},"BALANCES"),t&&(!j||"/orders"===O.pathname)&&a.a.createElement(Xr.a.Item,{key:"/orders",style:{margin:"white"}},"ORDERS"),!j&&a.a.createElement(Xr.a.SubMenu,null,a.a.createElement(Xr.a.Item,{key:"/add-market"},a.a.createElement("a",{href:Oa["/add-market"],target:"_blank",rel:"noopener noreferrer"},"Adding a market")),a.a.createElement(Xr.a.Item,{key:"/wallet-support"},a.a.createElement("a",{href:Oa["/wallet-support"],target:"_blank",rel:"noopener noreferrer"},"Supported wallets")),a.a.createElement(Xr.a.Item,{key:"/dex-list"},a.a.createElement("a",{href:Oa["/dex-list"],target:"_blank",rel:"noopener noreferrer"},"DEX list")),a.a.createElement(Xr.a.Item,{key:"/developer-resources"},a.a.createElement("a",{href:Oa["/developer-resources"],target:"_blank",rel:"noopener noreferrer"},"Developer resources")),a.a.createElement(Xr.a.Item,{key:"/explorer"},a.a.createElement("a",{href:Oa["/explorer"],target:"_blank",rel:"noopener noreferrer"},"Solana block explorer")),a.a.createElement(Xr.a.Item,{key:"/srm-faq"},a.a.createElement("a",{href:Oa["/srm-faq"],target:"_blank",rel:"noopener noreferrer"},"SRM FAQ")))),a.a.createElement("div",{style:{display:"flex",alignItems:"center",paddingRight:5}},a.a.createElement(ga,{onFocus:function(){return S(!0)},onBlur:function(){return S(!1)},focussed:j,width:j?"350px":"35px"})),a.a.createElement("div",null,a.a.createElement(Ie.a,{align:"middle",style:{paddingLeft:5,paddingRight:5},gutter:16},a.a.createElement(Ne.a,null,a.a.createElement(aa.a,{style:{color:"#3ea018"},onClick:function(){return b(!0)}})),a.a.createElement(Ne.a,null,a.a.createElement(_e.a,{content:c,placement:"bottomRight",title:"URL",trigger:"hover"},a.a.createElement(dr.a,{style:{color:"#3ea018"}}))),a.a.createElement(Ne.a,null,a.a.createElement(Ae.a,{onSelect:u,value:c,style:{marginRight:8,width:"150px"}},s.map((function(e){var t=e.name,n=e.endpoint;return a.a.createElement(Ae.a.Option,{value:n,key:n},t)})))))),t&&a.a.createElement("div",null,a.a.createElement(_e.a,{content:a.a.createElement(sa,{autoApprove:null===n||void 0===n?void 0:n.autoApprove}),placement:"bottomRight",title:"Settings",trigger:"click"},a.a.createElement(re.a,{style:{marginRight:8}},a.a.createElement(oa.a,null),"Settings"))),a.a.createElement("div",null,a.a.createElement(Zr,null))))}var Ea=n(412),xa=n.n(Ea),ja=ra.a.Header,Sa=ra.a.Content;function Ta(e){var t=e.children,n=qn(),o=n.refCode,c=n.setRefCode,i=n.allowRefLink,u=Object(Me.h)().search,s=xa.a.parse(u);return Object(r.useEffect)((function(){s.refCode&&s.refCode!==o&&i&&(te({message:"New referrer ".concat(s.refCode," added")}),c(s.refCode))}),[s,o,c,i]),a.a.createElement(a.a.Fragment,null,a.a.createElement(ra.a,{style:{display:"flex",minHeight:"100vh",flexDirection:"column"}},a.a.createElement(ja,{style:{padding:0,minHeight:0,height:"unset"}},a.a.createElement(wa,null)),a.a.createElement(Sa,{style:{flex:1}},t)))}function Ca(){return a.a.createElement(a.a.Fragment,null,a.a.createElement($.a,{basename:"/"},a.a.createElement(Ta,null,a.a.createElement(Me.d,null,a.a.createElement(Me.b,{exact:!0,path:"/"},a.a.createElement(Me.a,{to:Kt()})),a.a.createElement(Me.b,{exact:!0,path:"/market/:marketAddress"},a.a.createElement(Ur,null)),a.a.createElement(Me.b,{exact:!0,path:"/orders",component:$r}),a.a.createElement(Me.b,{exact:!0,path:"/balances",component:na})))))}function Ma(){return a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(je.a,{size:"large"})}},a.a.createElement(xe,null),a.a.createElement(Ce,null,a.a.createElement(U,null,a.a.createElement(Bn,null,a.a.createElement(ke,null,a.a.createElement(pr,null,a.a.createElement(r.Suspense,{fallback:function(){return a.a.createElement(je.a,{size:"large"})}},a.a.createElement(Ca,null))))))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(Ma,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[424,1,2]]]);
//# sourceMappingURL=main.9be3f038.chunk.js.map